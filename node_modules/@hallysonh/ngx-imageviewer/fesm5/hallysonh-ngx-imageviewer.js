import { InjectionToken, Injectable, Component, Input, ViewChild, Renderer2, Inject, NgModule, defineInjectable } from '@angular/core';
import { Subject } from 'rxjs';
import { __extends } from 'tslib';
import { DomSanitizer } from '@angular/platform-browser';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ImageViewerConfig = /** @class */ (function () {
    function ImageViewerConfig() {
    }
    return ImageViewerConfig;
}());
/**
 * @param {?=} icon
 * @param {?=} tooltip
 * @param {?=} sortId
 * @param {?=} show
 * @return {?}
 */
function createButtonConfig(icon, tooltip, sortId, show) {
    if (sortId === void 0) { sortId = 0; }
    if (show === void 0) { show = true; }
    return { icon: icon, tooltip: tooltip, sortId: sortId, show: show };
}
var /** @type {?} */ IMAGEVIEWER_CONFIG = new InjectionToken('imageviewer.config');
var /** @type {?} */ IMAGEVIEWER_CONFIG_DEFAULT = {
    width: 800,
    // component default width
    height: 600,
    // component default height
    bgStyle: '#ECEFF1',
    // component background style
    scaleStep: 0.1,
    // zoom scale step (using the zoom in/out buttons)
    rotateStepper: false,
    loadingMessage: 'Loading...',
    buttonStyle: {
        iconFontFamily: 'Material Icons',
        // font used to render the button icons
        alpha: 0.5,
        // buttons' transparence value
        hoverAlpha: 0.7,
        // buttons' transparence value when mouse is over
        bgStyle: '#000000',
        //  buttons' background style
        iconStyle: '#ffffff',
        // buttons' icon colors
        borderStyle: '#000000',
        // buttons' border style
        borderWidth: 0 // buttons' border width (0 == disabled)
    },
    tooltips: {
        enabled: true,
        // enable or disable tooltips for buttons
        bgStyle: '#000000',
        // tooltip background style
        bgAlpha: 0.5,
        // tooltip background transparence
        textStyle: '#ffffff',
        // tooltip's text style
        textAlpha: 0.9,
        // tooltip's text transparence
        padding: 15,
        // tooltip padding
        radius: 20 // tooltip border radius
    },
    nextPageButton: createButtonConfig(String.fromCharCode(0xE409), 'Next page', 0),
    beforePageButton: createButtonConfig(String.fromCharCode(0xE408), 'Previous page', 1),
    zoomOutButton: createButtonConfig(String.fromCharCode(0xE900), 'Zoom out', 0),
    zoomInButton: createButtonConfig(String.fromCharCode(0xE8FF), 'Zoom in', 1),
    rotateLeftButton: createButtonConfig(String.fromCharCode(0xE419), 'Rotate left', 2),
    rotateRightButton: createButtonConfig(String.fromCharCode(0xE41A), 'Rotate right', 3),
    resetButton: createButtonConfig(String.fromCharCode(0xE863), 'Reset', 4)
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var Button = /** @class */ (function () {
    //#endregion
    //#region Lifecycle events
    function Button(config, style) {
        this.style = style;
        //#region Properties
        this.sortId = 0;
        // hover state
        this.hover = false;
        // show/hide button
        this.display = true;
        this.drawPosition = null;
        this.drawRadius = 0;
        this.sortId = config.sortId;
        this.display = config.show;
        this.icon = config.icon;
        this.tooltip = config.tooltip;
    }
    //#endregion
    //#region Events
    // click action
    /**
     * @param {?} evt
     * @return {?}
     */
    Button.prototype.onClick = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) { alert('no click action set!'); return true; };
    // mouse down action
    /**
     * @param {?} evt
     * @return {?}
     */
    Button.prototype.onMouseDown = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) { return false; };
    //#endregion
    //#region Draw Button
    /**
     * @param {?} ctx
     * @param {?} x
     * @param {?} y
     * @param {?} radius
     * @return {?}
     */
    Button.prototype.draw = /**
     * @param {?} ctx
     * @param {?} x
     * @param {?} y
     * @param {?} radius
     * @return {?}
     */
    function (ctx, x, y, radius) {
        this.drawPosition = { x: x, y: y };
        this.drawRadius = radius;
        // preserve context
        ctx.save();
        // drawing settings
        var /** @type {?} */ isHover = (typeof this.hover === 'function') ? this.hover() : this.hover;
        ctx.globalAlpha = (isHover) ? this.style.hoverAlpha : this.style.alpha;
        ctx.fillStyle = this.style.bgStyle;
        ctx.lineWidth = 0;
        // draw circle
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, 2 * Math.PI);
        ctx.closePath();
        ctx.fill();
        if (this.style.borderWidth > 0) {
            ctx.lineWidth = this.style.borderWidth;
            ctx.strokeStyle = this.style.borderStyle;
            ctx.stroke();
        }
        // draw icon
        if (this.icon !== null) {
            ctx.save();
            // ctx.globalCompositeOperation = 'destination-out';
            this.drawIconFont(ctx, x, y, radius);
            ctx.restore();
        }
        // restore context
        ctx.restore();
    };
    /**
     * @param {?} ctx
     * @param {?} centreX
     * @param {?} centreY
     * @param {?} size
     * @return {?}
     */
    Button.prototype.drawIconFont = /**
     * @param {?} ctx
     * @param {?} centreX
     * @param {?} centreY
     * @param {?} size
     * @return {?}
     */
    function (ctx, centreX, centreY, size) {
        // font settings
        ctx.font = size + 'px ' + this.style.iconFontFamily;
        ctx.fillStyle = this.style.iconStyle;
        // calculate position
        var /** @type {?} */ textSize = ctx.measureText(this.icon);
        var /** @type {?} */ x = centreX - textSize.width / 2;
        var /** @type {?} */ y = centreY + size / 2;
        // draw it
        ctx.fillText(this.icon, x, y);
    };
    //#endregion
    //#region Utils
    /**
     * @param {?} x
     * @param {?} y
     * @return {?}
     */
    Button.prototype.isWithinBounds = /**
     * @param {?} x
     * @param {?} y
     * @return {?}
     */
    function (x, y) {
        if (this.drawPosition === null) {
            return false;
        }
        var /** @type {?} */ dx = Math.abs(this.drawPosition.x - x), /** @type {?} */ dy = Math.abs(this.drawPosition.y - y);
        return dx * dx + dy * dy <= this.drawRadius * this.drawRadius;
    };
    return Button;
}());
/**
 * @abstract
 */
var /**
 * @abstract
 */
ResourceLoader = /** @class */ (function () {
    function ResourceLoader() {
        this.viewport = { width: 0, height: 0, scale: 1, rotation: 0, x: 0, y: 0 };
        this.minScale = 0;
        this.maxScale = 4;
        this.currentItem = 1;
        this.totalItem = 1;
        this.showItemsQuantity = false;
        this.loaded = false;
        this.loading = false;
        this.rendering = false;
        this.resourceChange = new Subject();
    }
    /**
     * @param {?} canvasDim
     * @return {?}
     */
    ResourceLoader.prototype.resetViewport = /**
     * @param {?} canvasDim
     * @return {?}
     */
    function (canvasDim) {
        if (!this.loaded || !canvasDim) {
            return;
        }
        var /** @type {?} */ rotation = this.viewport ? this.viewport.rotation : 0;
        var /** @type {?} */ inverted = toSquareAngle(rotation) / 90 % 2 !== 0;
        var /** @type {?} */ canvas = {
            width: !inverted ? canvasDim.width : canvasDim.height,
            height: !inverted ? canvasDim.height : canvasDim.width
        };
        if (((canvas.height / this._image.height) * this._image.width) <= canvas.width) {
            this.viewport.scale = canvas.height / this._image.height;
        }
        else {
            this.viewport.scale = canvas.width / this._image.width;
        }
        this.minScale = this.viewport.scale / 4;
        this.maxScale = this.viewport.scale * 4;
        // start point to draw image
        this.viewport.width = this._image.width * this.viewport.scale;
        this.viewport.height = this._image.height * this.viewport.scale;
        this.viewport.x = (canvasDim.width - this.viewport.width) / 2;
        this.viewport.y = (canvasDim.height - this.viewport.height) / 2;
    };
    /**
     * @param {?} ctx
     * @param {?} config
     * @param {?} canvasDim
     * @param {?} onFinish
     * @return {?}
     */
    ResourceLoader.prototype.draw = /**
     * @param {?} ctx
     * @param {?} config
     * @param {?} canvasDim
     * @param {?} onFinish
     * @return {?}
     */
    function (ctx, config, canvasDim, onFinish) {
        // clear canvas
        ctx.clearRect(0, 0, canvasDim.width, canvasDim.height);
        // Draw background color;
        ctx.fillStyle = config.bgStyle;
        ctx.fillRect(0, 0, canvasDim.width, canvasDim.height);
        // draw image (transformed, rotate and scaled)
        if (!this.loading && this.loaded) {
            ctx.translate(this.viewport.x + this.viewport.width / 2, this.viewport.y + this.viewport.height / 2);
            ctx.rotate(this.viewport.rotation * Math.PI / 180);
            ctx.scale(this.viewport.scale, this.viewport.scale);
            ctx.drawImage(this._image, -this._image.width / 2, -this._image.height / 2);
        }
        else {
            ctx.fillStyle = '#333';
            ctx.font = '25px Verdana';
            ctx.textAlign = 'center';
            ctx.fillText(config.loadingMessage || 'Loading...', canvasDim.width / 2, canvasDim.height / 2);
        }
        onFinish(ctx, config, canvasDim);
    };
    /**
     * @return {?}
     */
    ResourceLoader.prototype.onResourceChange = /**
     * @return {?}
     */
    function () { return this.resourceChange.asObservable(); };
    return ResourceLoader;
}());
/**
 * @param {?} angle
 * @return {?}
 */
function toSquareAngle(angle) {
    return 90 * ((Math.trunc(angle / 90) + (Math.trunc(angle % 90) > 45 ? 1 : 0)) % 4);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ImageResourceLoader = /** @class */ (function (_super) {
    __extends(ImageResourceLoader, _super);
    function ImageResourceLoader() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @return {?}
     */
    ImageResourceLoader.prototype.setUp = /**
     * @return {?}
     */
    function () {
        this.loadResource();
    };
    /**
     * @return {?}
     */
    ImageResourceLoader.prototype.loadResource = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.loading = true;
        this._image = new Image();
        this._image.addEventListener('load', function (evt) {
            _this.loaded = true;
            _this.loading = false;
            _this.resourceChange.next();
        }, false);
        this._image.src = this.src;
    };
    return ImageResourceLoader;
}(ResourceLoader));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ImageCacheService = /** @class */ (function () {
    function ImageCacheService() {
        this._cache = [];
    }
    Object.defineProperty(ImageCacheService.prototype, "cache", {
        get: /**
         * @return {?}
         */
        function () {
            return this._cache;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} url
     * @param {?} page
     * @return {?}
     */
    ImageCacheService.prototype.getCache = /**
     * @param {?} url
     * @param {?} page
     * @return {?}
     */
    function (url, page) {
        return this.cache.find(function (i) { return i.url === url && i.page === page; });
    };
    /**
     * @param {?} url
     * @param {?} page
     * @return {?}
     */
    ImageCacheService.prototype.getImage = /**
     * @param {?} url
     * @param {?} page
     * @return {?}
     */
    function (url, page) {
        var /** @type {?} */ c = this.getCache(url, page);
        return c ? c.image : null;
    };
    /**
     * @param {?} url
     * @param {?} page
     * @param {?} image
     * @return {?}
     */
    ImageCacheService.prototype.saveImage = /**
     * @param {?} url
     * @param {?} page
     * @param {?} image
     * @return {?}
     */
    function (url, page, image) {
        var /** @type {?} */ cache = this.getCache(url, page);
        if (cache) {
            cache.image = image;
        }
        else {
            this.cache.push({ url: url, page: page, image: image });
        }
    };
    /**
     * @return {?}
     */
    ImageCacheService.prototype.disposeCache = /**
     * @return {?}
     */
    function () {
        this.cache.forEach(function (i) { return URL.revokeObjectURL(i.image.src); });
        this._cache = [];
    };
    ImageCacheService.decorators = [
        { type: Injectable, args: [{ providedIn: 'root' },] },
    ];
    /** @nocollapse */
    ImageCacheService.ctorParameters = function () { return []; };
    /** @nocollapse */ ImageCacheService.ngInjectableDef = defineInjectable({ factory: function ImageCacheService_Factory() { return new ImageCacheService(); }, token: ImageCacheService, providedIn: "root" });
    return ImageCacheService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var PdfResourceLoader = /** @class */ (function (_super) {
    __extends(PdfResourceLoader, _super);
    function PdfResourceLoader(_imageCache) {
        var _this = _super.call(this) || this;
        _this._imageCache = _imageCache;
        if (typeof window !== 'undefined' && 'Worker' in window) {
            if (pdfjsLib && pdfjsLib.GlobalWorkerOptions && !pdfjsLib.GlobalWorkerOptions.workerSrc) {
                pdfjsLib.GlobalWorkerOptions.workerSrc = pdfjsWorker;
            }
        }
        _this.showItemsQuantity = true;
        return _this;
    }
    /**
     * @return {?}
     */
    PdfResourceLoader.prototype.setUp = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ vm = this;
        if (vm.loading || !vm.src) {
            return;
        }
        var /** @type {?} */ loadingTask = pdfjsLib.getDocument(vm.src);
        vm.loading = true;
        vm.currentItem = 1;
        loadingTask.then(function (pdf) {
            vm._pdf = pdf;
            vm.totalItem = pdf.numPages;
            vm.loaded = true;
            vm.loadResource();
        }, function (reason) {
            console.error(reason);
        });
    };
    /**
     * @return {?}
     */
    PdfResourceLoader.prototype.loadResource = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ vm = this;
        if (!vm.loaded) {
            vm._pendingReload = true;
            return;
        }
        vm.loaded = false;
        var /** @type {?} */ url = vm.src;
        var /** @type {?} */ page = vm.currentItem;
        vm._pdf.getPage(page).then(function (pdfPage) {
            vm._page = pdfPage;
            vm.loadImage(url, page, function () {
                vm.loaded = true;
                vm.loading = false;
                if (vm._pendingReload) {
                    vm._pendingReload = false;
                    vm.loadResource();
                }
                else {
                    vm.resourceChange.next();
                }
            });
        });
    };
    /**
     * @param {?} src
     * @param {?} page
     * @param {?} onFinish
     * @return {?}
     */
    PdfResourceLoader.prototype.loadImage = /**
     * @param {?} src
     * @param {?} page
     * @param {?} onFinish
     * @return {?}
     */
    function (src, page, onFinish) {
        var /** @type {?} */ vm = this;
        var /** @type {?} */ cacheimg = vm._imageCache.getImage(src, page);
        if (cacheimg) {
            vm._image = cacheimg;
            onFinish();
            return;
        }
        var /** @type {?} */ canvas = document.createElement('canvas');
        var /** @type {?} */ context = canvas.getContext('2d');
        var /** @type {?} */ pageVp = vm._page.getViewport(2);
        canvas.width = pageVp.width;
        canvas.height = pageVp.height;
        var /** @type {?} */ renderContext = {
            canvasContext: context,
            viewport: pageVp
        };
        var /** @type {?} */ renderTask = vm._page.render(renderContext);
        renderTask.then(function () {
            canvas.toBlob(function (blob) {
                var /** @type {?} */ img = new Image();
                img.onload = onFinish;
                img.src = URL.createObjectURL(blob);
                vm._imageCache.saveImage(src, page, img);
                vm._image = img;
            });
        });
    };
    return PdfResourceLoader;
}(ResourceLoader));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var /** @type {?} */ MIN_TOOLTIP_WIDTH_SPACE = 500;
var ImageViewerComponent = /** @class */ (function () {
    //#endregion
    //#region Lifecycle events
    function ImageViewerComponent(_sanitizer, _renderer, _imageCache, config) {
        this._sanitizer = _sanitizer;
        this._renderer = _renderer;
        this._imageCache = _imageCache;
        this.config = config;
        this._dirty = true;
        this._buttons = [];
        this._currentTooltip = null;
        this._touchStartState = {};
        this._listenDestroyList = [];
        this.config = this.extendsDefaultConfig(config);
        this._nextPageButton = new Button(this.config.nextPageButton, this.config.buttonStyle);
        this._beforePageButton = new Button(this.config.beforePageButton, this.config.buttonStyle);
        this._zoomOutButton = new Button(this.config.zoomOutButton, this.config.buttonStyle);
        this._zoomInButton = new Button(this.config.zoomInButton, this.config.buttonStyle);
        this._rotateLeftButton = new Button(this.config.rotateLeftButton, this.config.buttonStyle);
        this._rotateRightButton = new Button(this.config.rotateRightButton, this.config.buttonStyle);
        this._resetButton = new Button(this.config.resetButton, this.config.buttonStyle);
        this._buttons = [
            this._zoomOutButton,
            this._zoomInButton,
            this._rotateLeftButton,
            this._rotateRightButton,
            this._resetButton
        ].filter(function (item) { return item.display; })
            .sort(function (a, b) { return a.sortId - b.sortId; });
    }
    Object.defineProperty(ImageViewerComponent.prototype, "src", {
        get: /**
         * @return {?}
         */
        function () { return this._src; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === this._src) {
                return;
            }
            this._src = value;
            this.setUpResource();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageViewerComponent.prototype, "filetype", {
        get: /**
         * @return {?}
         */
        function () { return this._filetype; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === this._filetype) {
                return;
            }
            this._filetype = value;
            this.setUpResource();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageViewerComponent.prototype, "width", {
        get: /**
         * @return {?}
         */
        function () { return this._width; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === this._width) {
                return;
            }
            this._width = value;
            if (this._canvas) {
                this._canvas.width = this._width;
            }
            this.resetImage();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ImageViewerComponent.prototype, "height", {
        get: /**
         * @return {?}
         */
        function () { return this._height; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === this._height) {
                return;
            }
            this._height = value;
            if (this._canvas) {
                this._canvas.height = this._height;
            }
            this.resetImage();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this._canvas = this.canvasRef.nativeElement;
        this._context = this._canvas.getContext('2d');
        // setting canvas dimention
        this._canvas.width = this.width || this.config.width;
        this._canvas.height = this.height || this.config.height;
        // setting buttons actions
        this._nextPageButton.onClick = function (evt) { _this.nextPage(); return false; };
        this._beforePageButton.onClick = function (evt) { _this.previousPage(); return false; };
        this._zoomOutButton.onClick = function (evt) { _this.zoomOut(); return false; };
        this._zoomInButton.onClick = function (evt) { _this.zoomIn(); return false; };
        this._rotateLeftButton.onClick = function (evt) { _this.rotateLeft(); return false; };
        this._rotateRightButton.onClick = function (evt) { _this.rotateRight(); return false; };
        this._resetButton.onClick = function (evt) { _this.resetImage(); return false; };
        // register event listeners
        this.addEventListeners();
        this.updateCanvas();
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // unregiste event listeners
        this._listenDestroyList.forEach(function (listenDestroy) {
            if (typeof listenDestroy === 'function') {
                listenDestroy();
            }
        });
        this._imageCache.disposeCache();
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.setUpResource = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.isImage(this.src) && (!this._resource || !(this._resource instanceof ImageResourceLoader))) {
            if (this._resourceChangeSub) {
                this._resourceChangeSub.unsubscribe();
            }
            if (!this._imageResource) {
                this._imageResource = new ImageResourceLoader();
            }
            this._resource = this._imageResource;
        }
        else if (this.isPdf(this.src) && (!this._resource || !(this._resource instanceof PdfResourceLoader))) {
            if (this._resourceChangeSub) {
                this._resourceChangeSub.unsubscribe();
            }
            if (!this._pdfResource) {
                this._pdfResource = new PdfResourceLoader(this._imageCache);
            }
            this._resource = this._pdfResource;
        }
        if (this._resource) {
            this._resource.src = this.src instanceof File ? URL.createObjectURL(this.src) : this.src;
            this._resourceChangeSub = this._resource.onResourceChange().subscribe(function () {
                _this.updateCanvas();
                if (_this.src instanceof File) {
                    URL.revokeObjectURL(_this._resource.src);
                }
            });
            this._resource.setUp();
            this.resetImage();
            if (this._context) {
                this.updateCanvas();
            }
        }
    };
    //#endregion
    //#region Touch events
    /**
     * @param {?} evt
     * @return {?}
     */
    ImageViewerComponent.prototype.onTap = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        var /** @type {?} */ activeElement = this.getUIElement(this.screenToCanvasCentre(evt.center));
        if (activeElement !== null) {
            activeElement.onClick(evt);
        }
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.onTouchEnd = /**
     * @return {?}
     */
    function () {
        this._touchStartState.viewport = undefined;
        this._touchStartState.scale = undefined;
        this._touchStartState.rotate = undefined;
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    ImageViewerComponent.prototype.processTouchEvent = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        // process pan
        if (!this._touchStartState.viewport) {
            this._touchStartState.viewport = Object.assign({}, this._resource.viewport);
        }
        var /** @type {?} */ viewport = this._resource.viewport;
        viewport.x = this._touchStartState.viewport.x + evt.deltaX;
        viewport.y = this._touchStartState.viewport.y + evt.deltaY;
        // process pinch in/out
        if (!this._touchStartState.scale) {
            this._touchStartState.scale = this._resource.viewport.scale;
        }
        var /** @type {?} */ newScale = this._touchStartState.scale * evt.scale;
        viewport.scale = newScale > this._resource.maxScale ? this._resource.maxScale :
            newScale < this._resource.minScale ? this._resource.minScale : newScale;
        // process rotate left/right
        if (!this._touchStartState.rotate) {
            this._touchStartState.rotate = { rotation: viewport.rotation, startRotate: evt.rotation };
        }
        if (evt.rotation !== 0) {
            var /** @type {?} */ newAngle = this._touchStartState.rotate.rotation + evt.rotation - this._touchStartState.rotate.startRotate;
            viewport.rotation = this.config.rotateStepper ? toSquareAngle(newAngle) : newAngle;
        }
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.addEventListeners = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // zooming
        this._listenDestroyList.push(this._renderer.listen(this._canvas, 'DOMMouseScroll', function (evt) { return _this.onMouseWheel(evt); }));
        this._listenDestroyList.push(this._renderer.listen(this._canvas, 'mousewheel', function (evt) { return _this.onMouseWheel(evt); }));
        // show tooltip when mouseover it
        this._listenDestroyList.push(this._renderer.listen(this._canvas, 'mousemove', function (evt) {
            return _this.checkTooltipActivation(_this.screenToCanvasCentre({ x: evt.clientX, y: evt.clientY }));
        }));
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    ImageViewerComponent.prototype.onMouseWheel = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        if (!evt) {
            evt = event;
        }
        evt.preventDefault();
        if (evt.detail < 0 || evt.wheelDelta > 0) {
            // up -> larger
            this.zoomIn();
        }
        else {
            // down -> smaller
            this.zoomOut();
        }
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    ImageViewerComponent.prototype.checkTooltipActivation = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.getUIElements().forEach(function (x) { return x.hover = false; });
        var /** @type {?} */ activeElement = this.getUIElement(pos);
        var /** @type {?} */ oldToolTip = this._currentTooltip;
        if (activeElement !== null) {
            if (typeof activeElement.hover !== 'undefined') {
                activeElement.hover = true;
            }
            if (typeof activeElement.tooltip !== 'undefined') {
                this._currentTooltip = activeElement.tooltip;
            }
        }
        if (oldToolTip !== this._currentTooltip) {
            this._dirty = true;
        }
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.nextPage = /**
     * @return {?}
     */
    function () {
        if (!this._resource) {
            return;
        }
        if (this._resource.currentItem >= this._resource.totalItem) {
            return;
        }
        if (this._resource.currentItem < 1) {
            this._resource.currentItem = 0;
        }
        this._resource.currentItem++;
        this._resource.loadResource();
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.previousPage = /**
     * @return {?}
     */
    function () {
        if (!this._resource) {
            return;
        }
        if (this._resource.currentItem <= 1) {
            return;
        }
        if (this._resource.currentItem > this._resource.totalItem) {
            this._resource.currentItem = this._resource.totalItem + 1;
        }
        this._resource.currentItem--;
        this._resource.loadResource();
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.zoomIn = /**
     * @return {?}
     */
    function () {
        if (!this._resource) {
            return;
        }
        var /** @type {?} */ newScale = this._resource.viewport.scale * (1 + this.config.scaleStep);
        this._resource.viewport.scale = newScale > this._resource.maxScale ? this._resource.maxScale : newScale;
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.zoomOut = /**
     * @return {?}
     */
    function () {
        if (!this._resource) {
            return;
        }
        var /** @type {?} */ newScale = this._resource.viewport.scale * (1 - this.config.scaleStep);
        this._resource.viewport.scale = newScale < this._resource.minScale ? this._resource.minScale : newScale;
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.rotateLeft = /**
     * @return {?}
     */
    function () {
        if (!this._resource) {
            return;
        }
        var /** @type {?} */ viewport = this._resource.viewport;
        viewport.rotation = viewport.rotation === 0 ? 270 : viewport.rotation - 90;
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.rotateRight = /**
     * @return {?}
     */
    function () {
        if (!this._resource) {
            return;
        }
        var /** @type {?} */ viewport = this._resource.viewport;
        viewport.rotation = viewport.rotation === 270 ? 0 : viewport.rotation + 90;
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.resetImage = /**
     * @return {?}
     */
    function () {
        if (!this._resource) {
            return;
        }
        this._resource.resetViewport(this._canvas);
        this._dirty = true;
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.updateCanvas = /**
     * @return {?}
     */
    function () {
        this.resetImage();
        // start new render loop
        this.render();
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.render = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var /** @type {?} */ vm = this;
        // only re-render if dirty
        if (this._dirty && this._resource) {
            this._dirty = false;
            var /** @type {?} */ ctx_1 = this._context;
            ctx_1.save();
            this._resource.draw(ctx_1, this.config, this._canvas, function () {
                ctx_1.restore();
                if (vm._resource.loaded) {
                    // draw buttons
                    // draw buttons
                    _this.drawButtons(ctx_1);
                    // draw paginator
                    if (_this._resource.showItemsQuantity) {
                        _this.drawPaginator(ctx_1);
                    }
                }
            });
        }
        requestAnimationFrame(function () { return _this.render(); });
    };
    /**
     * @param {?} ctx
     * @return {?}
     */
    ImageViewerComponent.prototype.drawButtons = /**
     * @param {?} ctx
     * @return {?}
     */
    function (ctx) {
        var /** @type {?} */ padding = this.config.tooltips.padding;
        var /** @type {?} */ radius = this.config.tooltips.radius;
        var /** @type {?} */ gap = 2 * radius + padding;
        var /** @type {?} */ x = this._canvas.width - radius - padding;
        var /** @type {?} */ y = this._canvas.height - radius - padding;
        // draw buttons
        for (var /** @type {?} */ i = 0; i < this._buttons.length; i++) {
            this._buttons[i].draw(ctx, x, y - gap * i, radius);
        }
        // draw tooltip
        if (this._currentTooltip !== null && this._canvas.width > MIN_TOOLTIP_WIDTH_SPACE) {
            ctx.save();
            var /** @type {?} */ fontSize = radius;
            ctx.font = fontSize + 'px sans-serif';
            // calculate position
            var /** @type {?} */ textSize = ctx.measureText(this._currentTooltip).width, /** @type {?} */ rectWidth = textSize + padding, /** @type {?} */ rectHeight = fontSize * 0.70 + padding, /** @type {?} */ rectX = this._canvas.width
                - (2 * radius + 2 * padding) // buttons
                - rectWidth, /** @type {?} */ rectY = this._canvas.height - rectHeight - padding, /** @type {?} */ textX = rectX + 0.5 * padding, /** @type {?} */ textY = this._canvas.height - 1.5 * padding;
            ctx.globalAlpha = this.config.tooltips.bgAlpha;
            ctx.fillStyle = this.config.tooltips.bgStyle;
            this.drawRoundRectangle(ctx, rectX, rectY, rectWidth, rectHeight, 8, true, false);
            ctx.globalAlpha = this.config.tooltips.textAlpha;
            ctx.fillStyle = this.config.tooltips.textStyle;
            ctx.fillText(this._currentTooltip, textX, textY);
            ctx.restore();
        }
    };
    /**
     * @param {?} ctx
     * @return {?}
     */
    ImageViewerComponent.prototype.drawPaginator = /**
     * @param {?} ctx
     * @return {?}
     */
    function (ctx) {
        var /** @type {?} */ padding = this.config.tooltips.padding;
        var /** @type {?} */ radius = this.config.tooltips.radius;
        var /** @type {?} */ labelWidth = 50;
        var /** @type {?} */ x1 = (this._canvas.width - labelWidth) / 2 - radius - padding; // PrevPageButton
        var /** @type {?} */ x2 = this._canvas.width / 2; // Label
        var /** @type {?} */ x3 = (this._canvas.width + labelWidth) / 2 + radius + padding; // NextPageButton
        var /** @type {?} */ y = this._canvas.height - radius - padding;
        var /** @type {?} */ label = this._resource.currentItem + '/' + this._resource.totalItem;
        var /** @type {?} */ fontSize = 25;
        ctx.save();
        this._beforePageButton.draw(ctx, x1, y, radius);
        this._nextPageButton.draw(ctx, x3, y, radius);
        ctx.restore();
        ctx.save();
        ctx.font = fontSize + 'px Verdana';
        ctx.textAlign = 'center';
        ctx.fillText(label, x2, this._canvas.height - padding - fontSize / 2, labelWidth);
        ctx.restore();
    };
    /**
     * @param {?} ctx
     * @param {?} x
     * @param {?} y
     * @param {?} width
     * @param {?} height
     * @param {?} radius
     * @param {?} fill
     * @param {?} stroke
     * @return {?}
     */
    ImageViewerComponent.prototype.drawRoundRectangle = /**
     * @param {?} ctx
     * @param {?} x
     * @param {?} y
     * @param {?} width
     * @param {?} height
     * @param {?} radius
     * @param {?} fill
     * @param {?} stroke
     * @return {?}
     */
    function (ctx, x, y, width, height, radius, fill, stroke) {
        radius = (typeof radius === 'number') ? radius : 5;
        fill = (typeof fill === 'boolean') ? fill : true; // fill = default
        stroke = (typeof stroke === 'boolean') ? stroke : false;
        // draw round rectangle
        ctx.beginPath();
        ctx.moveTo(x + radius, y);
        ctx.lineTo(x + width - radius, y);
        ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
        ctx.lineTo(x + width, y + height - radius);
        ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        ctx.lineTo(x + radius, y + height);
        ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
        ctx.lineTo(x, y + radius);
        ctx.quadraticCurveTo(x, y, x + radius, y);
        ctx.closePath();
        if (fill) {
            ctx.fill();
        }
        if (stroke) {
            ctx.stroke();
        }
    };
    /**
     * @param {?} cfg
     * @return {?}
     */
    ImageViewerComponent.prototype.extendsDefaultConfig = /**
     * @param {?} cfg
     * @return {?}
     */
    function (cfg) {
        var /** @type {?} */ defaultCfg = IMAGEVIEWER_CONFIG_DEFAULT;
        var /** @type {?} */ localCfg = Object.assign({}, defaultCfg, cfg);
        if (cfg.buttonStyle) {
            localCfg.buttonStyle = Object.assign(defaultCfg.buttonStyle, cfg.buttonStyle);
        }
        if (cfg.tooltips) {
            localCfg.tooltips = Object.assign(defaultCfg.tooltips, cfg.tooltips);
        }
        if (cfg.nextPageButton) {
            localCfg.nextPageButton = Object.assign(defaultCfg.nextPageButton, cfg.nextPageButton);
        }
        if (cfg.beforePageButton) {
            localCfg.beforePageButton = Object.assign(defaultCfg.beforePageButton, cfg.beforePageButton);
        }
        if (cfg.zoomOutButton) {
            localCfg.zoomOutButton = Object.assign(defaultCfg.zoomOutButton, cfg.zoomOutButton);
        }
        if (cfg.zoomOutButton) {
            localCfg.zoomOutButton = Object.assign(defaultCfg.zoomOutButton, cfg.zoomOutButton);
        }
        if (cfg.zoomInButton) {
            localCfg.zoomInButton = Object.assign(defaultCfg.zoomInButton, cfg.zoomInButton);
        }
        if (cfg.rotateLeftButton) {
            localCfg.rotateLeftButton = Object.assign(defaultCfg.rotateLeftButton, cfg.rotateLeftButton);
        }
        if (cfg.rotateRightButton) {
            localCfg.rotateRightButton = Object.assign(defaultCfg.rotateRightButton, cfg.rotateRightButton);
        }
        if (cfg.resetButton) {
            localCfg.resetButton = Object.assign(defaultCfg.resetButton, cfg.resetButton);
        }
        return localCfg;
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    ImageViewerComponent.prototype.screenToCanvasCentre = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        var /** @type {?} */ rect = this._canvas.getBoundingClientRect();
        return { x: pos.x - rect.left, y: pos.y - rect.top };
    };
    /**
     * @return {?}
     */
    ImageViewerComponent.prototype.getUIElements = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ hoverElements = this._buttons.slice();
        hoverElements.push(this._nextPageButton);
        hoverElements.push(this._beforePageButton);
        return hoverElements;
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    ImageViewerComponent.prototype.getUIElement = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        var /** @type {?} */ activeUIElement = this.getUIElements().filter(function (uiElement) {
            return uiElement.isWithinBounds(pos.x, pos.y);
        });
        return (activeUIElement.length > 0) ? activeUIElement[0] : null;
    };
    /**
     * @param {?} file
     * @return {?}
     */
    ImageViewerComponent.prototype.isImage = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        if (this._filetype && this._filetype.toLowerCase() === 'image') {
            return true;
        }
        return testFile(file, '\\.(png|jpg|jpeg|gif)|image/png');
    };
    /**
     * @param {?} file
     * @return {?}
     */
    ImageViewerComponent.prototype.isPdf = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        if (this._filetype && this._filetype.toLowerCase() === 'pdf') {
            return true;
        }
        return testFile(file, '\\.(pdf)|application/pdf');
    };
    ImageViewerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ngx-imageviewer',
                    template: "\n    <canvas #imageContainer [width]=\"width\" [height]=\"height\"\n      (tap)=\"onTap($event)\" (pinchin)=\"processTouchEvent($event)\" (pinchout)=\"processTouchEvent($event)\"\n      (panmove)=\"processTouchEvent($event)\" (panend)=\"onTouchEnd()\" (rotatemove)=\"processTouchEvent($event)\"\n        (rotateend)=\"onTouchEnd()\">\n    </canvas>\n  ",
                    styles: ["\n    :host { display: block }\n    :host canvas { margin: 0 auto; display: block }\n    [hidden] { display: none !important }\n  "]
                },] },
    ];
    //#endregion
    /** @nocollapse */
    ImageViewerComponent.ctorParameters = function () { return [
        { type: DomSanitizer, },
        { type: Renderer2, },
        { type: ImageCacheService, },
        { type: ImageViewerConfig, decorators: [{ type: Inject, args: [IMAGEVIEWER_CONFIG,] },] },
    ]; };
    ImageViewerComponent.propDecorators = {
        "src": [{ type: Input, args: ['src',] },],
        "filetype": [{ type: Input, args: ['filetype',] },],
        "width": [{ type: Input, args: ['width',] },],
        "height": [{ type: Input, args: ['height',] },],
        "canvasRef": [{ type: ViewChild, args: ['imageContainer',] },],
    };
    return ImageViewerComponent;
}());
/**
 * @param {?} file
 * @param {?} regexTest
 * @return {?}
 */
function testFile(file, regexTest) {
    if (!file) {
        return false;
    }
    var /** @type {?} */ name = file instanceof File ? file.name : file;
    return name.toLowerCase().match(regexTest) !== null;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ɵ0 = IMAGEVIEWER_CONFIG_DEFAULT;
var ImageViewerModule = /** @class */ (function () {
    function ImageViewerModule() {
    }
    ImageViewerModule.decorators = [
        { type: NgModule, args: [{
                    providers: [{ provide: IMAGEVIEWER_CONFIG, useValue: ɵ0 }],
                    declarations: [ImageViewerComponent],
                    exports: [ImageViewerComponent],
                },] },
    ];
    return ImageViewerModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { ImageViewerModule, ImageViewerConfig, createButtonConfig, IMAGEVIEWER_CONFIG, ImageCacheService as ɵc, ImageViewerComponent as ɵb, IMAGEVIEWER_CONFIG_DEFAULT as ɵa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFsbHlzb25oLW5neC1pbWFnZXZpZXdlci5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vQGhhbGx5c29uaC9uZ3gtaW1hZ2V2aWV3ZXIvbGliL2ltYWdldmlld2VyLmNvbmZpZy50cyIsIm5nOi8vQGhhbGx5c29uaC9uZ3gtaW1hZ2V2aWV3ZXIvbGliL2ltYWdldmlld2VyLm1vZGVsLnRzIiwibmc6Ly9AaGFsbHlzb25oL25neC1pbWFnZXZpZXdlci9saWIvaW1hZ2UubG9hZGVyLnRzIiwibmc6Ly9AaGFsbHlzb25oL25neC1pbWFnZXZpZXdlci9saWIvaW1hZ2VjYWNoZS5zZXJ2aWNlLnRzIiwibmc6Ly9AaGFsbHlzb25oL25neC1pbWFnZXZpZXdlci9saWIvcGRmLmxvYWRlci50cyIsIm5nOi8vQGhhbGx5c29uaC9uZ3gtaW1hZ2V2aWV3ZXIvbGliL2ltYWdldmlld2VyLmNvbXBvbmVudC50cyIsIm5nOi8vQGhhbGx5c29uaC9uZ3gtaW1hZ2V2aWV3ZXIvbGliL2ltYWdldmlld2VyLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3Rpb25Ub2tlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEltYWdlVmlld2VyQ29uZmlnIHtcclxuICB3aWR0aD86IG51bWJlcjtcclxuICBoZWlnaHQ/OiBudW1iZXI7XHJcbiAgYmdTdHlsZT86IHN0cmluZztcclxuICBzY2FsZVN0ZXA/OiBudW1iZXI7XHJcbiAgcm90YXRlU3RlcHBlcj86IGJvb2xlYW47XHJcbiAgYnV0dG9uU3R5bGU/OiBCdXR0b25TdHlsZTtcclxuICBsb2FkaW5nTWVzc2FnZT86IHN0cmluZztcclxuICB0b29sdGlwcz86IHtcclxuICAgIGVuYWJsZWQ/OiBib29sZWFuLFxyXG4gICAgYmdTdHlsZT86IHN0cmluZyxcclxuICAgIGJnQWxwaGE/OiBudW1iZXIsXHJcbiAgICB0ZXh0U3R5bGU/OiBzdHJpbmcsXHJcbiAgICB0ZXh0QWxwaGE/OiBudW1iZXIsXHJcbiAgICBwYWRkaW5nPzogbnVtYmVyLFxyXG4gICAgcmFkaXVzPzogbnVtYmVyXHJcbiAgfTtcclxuICBuZXh0UGFnZUJ1dHRvbj86IEJ1dHRvbkNvbmZpZztcclxuICBiZWZvcmVQYWdlQnV0dG9uPzogQnV0dG9uQ29uZmlnO1xyXG4gIHpvb21PdXRCdXR0b24/OiBCdXR0b25Db25maWc7XHJcbiAgem9vbUluQnV0dG9uPzogQnV0dG9uQ29uZmlnO1xyXG4gIHJvdGF0ZUxlZnRCdXR0b24/OiBCdXR0b25Db25maWc7XHJcbiAgcm90YXRlUmlnaHRCdXR0b24/OiBCdXR0b25Db25maWc7XHJcbiAgcmVzZXRCdXR0b24/OiBCdXR0b25Db25maWc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uU3R5bGUge1xyXG4gIGljb25Gb250RmFtaWx5Pzogc3RyaW5nO1xyXG4gIGFscGhhPzogbnVtYmVyO1xyXG4gIGhvdmVyQWxwaGE/OiBudW1iZXI7XHJcbiAgYmdTdHlsZT86IHN0cmluZztcclxuICBpY29uU3R5bGU/OiBzdHJpbmc7XHJcbiAgYm9yZGVyU3R5bGU/OiBzdHJpbmc7XHJcbiAgYm9yZGVyV2lkdGg/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uQ29uZmlnIHtcclxuICBpY29uPzogc3RyaW5nO1xyXG4gIHRvb2x0aXA/OiBzdHJpbmc7XHJcbiAgc29ydElkPzogbnVtYmVyO1xyXG4gIHNob3c/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQnV0dG9uQ29uZmlnKGljb24/OiBzdHJpbmcsIHRvb2x0aXA/OiBzdHJpbmcsIHNvcnRJZDogbnVtYmVyID0gMCwgc2hvdzogYm9vbGVhbiA9IHRydWUpIHtcclxuICByZXR1cm4geyBpY29uOiBpY29uLCB0b29sdGlwOiB0b29sdGlwLCBzb3J0SWQ6IHNvcnRJZCwgc2hvdzogc2hvdyB9O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgSU1BR0VWSUVXRVJfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPEltYWdlVmlld2VyQ29uZmlnPignaW1hZ2V2aWV3ZXIuY29uZmlnJyk7XHJcblxyXG5leHBvcnQgbGV0IElNQUdFVklFV0VSX0NPTkZJR19ERUZBVUxUOiBJbWFnZVZpZXdlckNvbmZpZyA9IHtcclxuICB3aWR0aDogODAwLCAvLyBjb21wb25lbnQgZGVmYXVsdCB3aWR0aFxyXG4gIGhlaWdodDogNjAwLCAvLyBjb21wb25lbnQgZGVmYXVsdCBoZWlnaHRcclxuICBiZ1N0eWxlOiAnI0VDRUZGMScsIC8vIGNvbXBvbmVudCBiYWNrZ3JvdW5kIHN0eWxlXHJcbiAgc2NhbGVTdGVwOiAwLjEsIC8vIHpvb20gc2NhbGUgc3RlcCAodXNpbmcgdGhlIHpvb20gaW4vb3V0IGJ1dHRvbnMpXHJcbiAgcm90YXRlU3RlcHBlcjogZmFsc2UsXHJcbiAgbG9hZGluZ01lc3NhZ2U6ICdMb2FkaW5nLi4uJyxcclxuICBidXR0b25TdHlsZToge1xyXG4gICAgaWNvbkZvbnRGYW1pbHk6ICdNYXRlcmlhbCBJY29ucycsIC8vIGZvbnQgdXNlZCB0byByZW5kZXIgdGhlIGJ1dHRvbiBpY29uc1xyXG4gICAgYWxwaGE6IDAuNSwgLy8gYnV0dG9ucycgdHJhbnNwYXJlbmNlIHZhbHVlXHJcbiAgICBob3ZlckFscGhhOiAwLjcsIC8vIGJ1dHRvbnMnIHRyYW5zcGFyZW5jZSB2YWx1ZSB3aGVuIG1vdXNlIGlzIG92ZXJcclxuICAgIGJnU3R5bGU6ICcjMDAwMDAwJywgLy8gIGJ1dHRvbnMnIGJhY2tncm91bmQgc3R5bGVcclxuICAgIGljb25TdHlsZTogJyNmZmZmZmYnLCAvLyBidXR0b25zJyBpY29uIGNvbG9yc1xyXG4gICAgYm9yZGVyU3R5bGU6ICcjMDAwMDAwJywgLy8gYnV0dG9ucycgYm9yZGVyIHN0eWxlXHJcbiAgICBib3JkZXJXaWR0aDogMCAvLyBidXR0b25zJyBib3JkZXIgd2lkdGggKDAgPT0gZGlzYWJsZWQpXHJcbiAgfSxcclxuICB0b29sdGlwczoge1xyXG4gICAgZW5hYmxlZDogdHJ1ZSwgLy8gZW5hYmxlIG9yIGRpc2FibGUgdG9vbHRpcHMgZm9yIGJ1dHRvbnNcclxuICAgIGJnU3R5bGU6ICcjMDAwMDAwJywgLy8gdG9vbHRpcCBiYWNrZ3JvdW5kIHN0eWxlXHJcbiAgICBiZ0FscGhhOiAwLjUsIC8vIHRvb2x0aXAgYmFja2dyb3VuZCB0cmFuc3BhcmVuY2VcclxuICAgIHRleHRTdHlsZTogJyNmZmZmZmYnLCAvLyB0b29sdGlwJ3MgdGV4dCBzdHlsZVxyXG4gICAgdGV4dEFscGhhOiAwLjksIC8vIHRvb2x0aXAncyB0ZXh0IHRyYW5zcGFyZW5jZVxyXG4gICAgcGFkZGluZzogMTUsIC8vIHRvb2x0aXAgcGFkZGluZ1xyXG4gICAgcmFkaXVzOiAyMCAvLyB0b29sdGlwIGJvcmRlciByYWRpdXNcclxuICB9LFxyXG4gIG5leHRQYWdlQnV0dG9uOiBjcmVhdGVCdXR0b25Db25maWcoU3RyaW5nLmZyb21DaGFyQ29kZSgweEU0MDkpLCAnTmV4dCBwYWdlJywgMCksXHJcbiAgYmVmb3JlUGFnZUJ1dHRvbjogY3JlYXRlQnV0dG9uQ29uZmlnKFN0cmluZy5mcm9tQ2hhckNvZGUoMHhFNDA4KSwgJ1ByZXZpb3VzIHBhZ2UnLCAxKSxcclxuICB6b29tT3V0QnV0dG9uOiBjcmVhdGVCdXR0b25Db25maWcoU3RyaW5nLmZyb21DaGFyQ29kZSgweEU5MDApLCAnWm9vbSBvdXQnLCAwKSxcclxuICB6b29tSW5CdXR0b246IGNyZWF0ZUJ1dHRvbkNvbmZpZyhTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RThGRiksICdab29tIGluJywgMSksXHJcbiAgcm90YXRlTGVmdEJ1dHRvbjogY3JlYXRlQnV0dG9uQ29uZmlnKFN0cmluZy5mcm9tQ2hhckNvZGUoMHhFNDE5KSwgJ1JvdGF0ZSBsZWZ0JywgMiksXHJcbiAgcm90YXRlUmlnaHRCdXR0b246IGNyZWF0ZUJ1dHRvbkNvbmZpZyhTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RTQxQSksICdSb3RhdGUgcmlnaHQnLCAzKSxcclxuICByZXNldEJ1dHRvbjogY3JlYXRlQnV0dG9uQ29uZmlnKFN0cmluZy5mcm9tQ2hhckNvZGUoMHhFODYzKSwgJ1Jlc2V0JywgNClcclxufTtcclxuIiwiaW1wb3J0IHsgQnV0dG9uQ29uZmlnLCBCdXR0b25TdHlsZSwgSW1hZ2VWaWV3ZXJDb25maWcgfSBmcm9tICcuL2ltYWdldmlld2VyLmNvbmZpZyc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b24ge1xyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgc29ydElkID0gMDtcclxuXHJcbiAgaWNvbjogc3RyaW5nO1xyXG4gIHRvb2x0aXA6IHN0cmluZztcclxuXHJcbiAgLy8gaG92ZXIgc3RhdGVcclxuICBob3ZlcjogYm9vbGVhbiB8ICgoKSA9PiBib29sZWFuKSA9IGZhbHNlO1xyXG5cclxuICAvLyBzaG93L2hpZGUgYnV0dG9uXHJcbiAgZGlzcGxheSA9IHRydWU7XHJcblxyXG4gIC8vIGRyYXduIG9uIHBvc2l0aW9uXHJcbiAgcHJpdmF0ZSBkcmF3UG9zaXRpb24gPSBudWxsO1xyXG4gIHByaXZhdGUgZHJhd1JhZGl1cyA9IDA7XHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI3JlZ2lvbiBMaWZlY3ljbGUgZXZlbnRzXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBjb25maWc6IEJ1dHRvbkNvbmZpZyxcclxuICAgIHByaXZhdGUgc3R5bGU6IEJ1dHRvblN0eWxlXHJcbiAgKSB7XHJcbiAgICB0aGlzLnNvcnRJZCA9IGNvbmZpZy5zb3J0SWQ7XHJcbiAgICB0aGlzLmRpc3BsYXkgPSBjb25maWcuc2hvdztcclxuICAgIHRoaXMuaWNvbiA9IGNvbmZpZy5pY29uO1xyXG4gICAgdGhpcy50b29sdGlwID0gY29uZmlnLnRvb2x0aXA7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gRXZlbnRzXHJcbiAgLy8gY2xpY2sgYWN0aW9uXHJcbiAgb25DbGljayhldnQpIHsgYWxlcnQoJ25vIGNsaWNrIGFjdGlvbiBzZXQhJyk7IHJldHVybiB0cnVlOyB9XHJcblxyXG4gIC8vIG1vdXNlIGRvd24gYWN0aW9uXHJcbiAgb25Nb3VzZURvd24oZXZ0KSB7IHJldHVybiBmYWxzZTsgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gRHJhdyBCdXR0b25cclxuICBkcmF3KGN0eCwgeCwgeSwgcmFkaXVzKSB7XHJcbiAgICB0aGlzLmRyYXdQb3NpdGlvbiA9IHsgeDogeCwgeTogeSB9O1xyXG4gICAgdGhpcy5kcmF3UmFkaXVzID0gcmFkaXVzO1xyXG5cclxuICAgIC8vIHByZXNlcnZlIGNvbnRleHRcclxuICAgIGN0eC5zYXZlKCk7XHJcblxyXG4gICAgLy8gZHJhd2luZyBzZXR0aW5nc1xyXG4gICAgY29uc3QgaXNIb3ZlciA9ICh0eXBlb2YgdGhpcy5ob3ZlciA9PT0gJ2Z1bmN0aW9uJykgPyB0aGlzLmhvdmVyKCkgOiB0aGlzLmhvdmVyO1xyXG4gICAgY3R4Lmdsb2JhbEFscGhhID0gKGlzSG92ZXIpID8gdGhpcy5zdHlsZS5ob3ZlckFscGhhIDogdGhpcy5zdHlsZS5hbHBoYTtcclxuICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlLmJnU3R5bGU7XHJcbiAgICBjdHgubGluZVdpZHRoID0gMDtcclxuXHJcbiAgICAvLyBkcmF3IGNpcmNsZVxyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4LmFyYyh4LCB5LCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICBpZiAodGhpcy5zdHlsZS5ib3JkZXJXaWR0aCA+IDApIHtcclxuICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaXMuc3R5bGUuYm9yZGVyV2lkdGg7XHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuc3R5bGUuYm9yZGVyU3R5bGU7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmF3IGljb25cclxuICAgIGlmICh0aGlzLmljb24gIT09IG51bGwpIHtcclxuICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgLy8gY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdXQnO1xyXG4gICAgICB0aGlzLmRyYXdJY29uRm9udChjdHgsIHgsIHksIHJhZGl1cyk7XHJcbiAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVzdG9yZSBjb250ZXh0XHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkcmF3SWNvbkZvbnQoY3R4LCBjZW50cmVYLCBjZW50cmVZLCBzaXplKSB7XHJcbiAgICAvLyBmb250IHNldHRpbmdzXHJcbiAgICBjdHguZm9udCA9IHNpemUgKyAncHggJyArIHRoaXMuc3R5bGUuaWNvbkZvbnRGYW1pbHk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5zdHlsZS5pY29uU3R5bGU7XHJcblxyXG4gICAgLy8gY2FsY3VsYXRlIHBvc2l0aW9uXHJcbiAgICBjb25zdCB0ZXh0U2l6ZSA9IGN0eC5tZWFzdXJlVGV4dCh0aGlzLmljb24pO1xyXG4gICAgY29uc3QgeCA9IGNlbnRyZVggLSB0ZXh0U2l6ZS53aWR0aCAvIDI7XHJcbiAgICBjb25zdCB5ID0gY2VudHJlWSArIHNpemUgLyAyO1xyXG5cclxuICAgIC8vIGRyYXcgaXRcclxuICAgIGN0eC5maWxsVGV4dCh0aGlzLmljb24sIHgsIHkpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIFV0aWxzXHJcbiAgaXNXaXRoaW5Cb3VuZHMoeCwgeSkge1xyXG4gICAgaWYgKHRoaXMuZHJhd1Bvc2l0aW9uID09PSBudWxsKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgY29uc3QgZHggPSBNYXRoLmFicyh0aGlzLmRyYXdQb3NpdGlvbi54IC0geCksIGR5ID0gTWF0aC5hYnModGhpcy5kcmF3UG9zaXRpb24ueSAtIHkpO1xyXG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5IDw9IHRoaXMuZHJhd1JhZGl1cyAqIHRoaXMuZHJhd1JhZGl1cztcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3cG9ydCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgd2lkdGg6IG51bWJlcixcclxuICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcixcclxuICAgIHB1YmxpYyBzY2FsZTogbnVtYmVyLFxyXG4gICAgcHVibGljIHJvdGF0aW9uOiBudW1iZXIsXHJcbiAgICBwdWJsaWMgeDogbnVtYmVyLFxyXG4gICAgcHVibGljIHk6IG51bWJlclxyXG4gICkge31cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb24geyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlcjsgfVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJlc291cmNlTG9hZGVyIHtcclxuICBwdWJsaWMgc3JjOiBzdHJpbmc7XHJcbiAgcHVibGljIHNvdXJjZURpbTogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9O1xyXG4gIHB1YmxpYyB2aWV3cG9ydDogVmlld3BvcnQgPSB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAsIHNjYWxlOiAxLCByb3RhdGlvbjogMCwgeDogMCwgeTogMCB9O1xyXG4gIHB1YmxpYyBtaW5TY2FsZSA9IDA7XHJcbiAgcHVibGljIG1heFNjYWxlID0gNDtcclxuICBwdWJsaWMgY3VycmVudEl0ZW0gPSAxO1xyXG4gIHB1YmxpYyB0b3RhbEl0ZW0gPSAxO1xyXG4gIHB1YmxpYyBzaG93SXRlbXNRdWFudGl0eSA9IGZhbHNlO1xyXG4gIHB1YmxpYyBsb2FkZWQgPSBmYWxzZTtcclxuICBwdWJsaWMgbG9hZGluZyA9IGZhbHNlO1xyXG4gIHB1YmxpYyByZW5kZXJpbmcgPSBmYWxzZTtcclxuXHJcbiAgcHJvdGVjdGVkIF9pbWFnZTtcclxuICBwcm90ZWN0ZWQgcmVzb3VyY2VDaGFuZ2UgPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XHJcblxyXG4gIGFic3RyYWN0IHNldFVwKCk7XHJcbiAgYWJzdHJhY3QgbG9hZFJlc291cmNlKCk7XHJcblxyXG4gIHB1YmxpYyByZXNldFZpZXdwb3J0KGNhbnZhc0RpbTogRGltZW5zaW9uKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoIXRoaXMubG9hZGVkIHx8ICFjYW52YXNEaW0pIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLnZpZXdwb3J0ID8gdGhpcy52aWV3cG9ydC5yb3RhdGlvbiA6IDA7XHJcbiAgICBjb25zdCBpbnZlcnRlZCA9IHRvU3F1YXJlQW5nbGUocm90YXRpb24pIC8gOTAgJSAyICE9PSAwO1xyXG4gICAgY29uc3QgY2FudmFzID0ge1xyXG4gICAgICB3aWR0aDogIWludmVydGVkID8gY2FudmFzRGltLndpZHRoIDogY2FudmFzRGltLmhlaWdodCxcclxuICAgICAgaGVpZ2h0OiAhaW52ZXJ0ZWQgPyBjYW52YXNEaW0uaGVpZ2h0IDogY2FudmFzRGltLndpZHRoXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICgoKGNhbnZhcy5oZWlnaHQgLyB0aGlzLl9pbWFnZS5oZWlnaHQpICogdGhpcy5faW1hZ2Uud2lkdGgpIDw9IGNhbnZhcy53aWR0aCkge1xyXG4gICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlID0gY2FudmFzLmhlaWdodCAvIHRoaXMuX2ltYWdlLmhlaWdodDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudmlld3BvcnQuc2NhbGUgPSBjYW52YXMud2lkdGggLyB0aGlzLl9pbWFnZS53aWR0aDtcclxuICAgIH1cclxuICAgIHRoaXMubWluU2NhbGUgPSB0aGlzLnZpZXdwb3J0LnNjYWxlIC8gNDtcclxuICAgIHRoaXMubWF4U2NhbGUgPSB0aGlzLnZpZXdwb3J0LnNjYWxlICogNDtcclxuXHJcbiAgICAvLyBzdGFydCBwb2ludCB0byBkcmF3IGltYWdlXHJcbiAgICB0aGlzLnZpZXdwb3J0LndpZHRoID0gdGhpcy5faW1hZ2Uud2lkdGggKiB0aGlzLnZpZXdwb3J0LnNjYWxlO1xyXG4gICAgdGhpcy52aWV3cG9ydC5oZWlnaHQgPSB0aGlzLl9pbWFnZS5oZWlnaHQgKiB0aGlzLnZpZXdwb3J0LnNjYWxlO1xyXG4gICAgdGhpcy52aWV3cG9ydC54ID0gKGNhbnZhc0RpbS53aWR0aCAtIHRoaXMudmlld3BvcnQud2lkdGgpIC8gMjtcclxuICAgIHRoaXMudmlld3BvcnQueSA9IChjYW52YXNEaW0uaGVpZ2h0IC0gdGhpcy52aWV3cG9ydC5oZWlnaHQpIC8gMjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkcmF3KGN0eCwgY29uZmlnOiBJbWFnZVZpZXdlckNvbmZpZywgY2FudmFzRGltOiBEaW1lbnNpb24sIG9uRmluaXNoKSB7XHJcbiAgICAvLyBjbGVhciBjYW52YXNcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzRGltLndpZHRoLCBjYW52YXNEaW0uaGVpZ2h0KTtcclxuXHJcbiAgICAvLyBEcmF3IGJhY2tncm91bmQgY29sb3I7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gY29uZmlnLmJnU3R5bGU7XHJcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzRGltLndpZHRoLCBjYW52YXNEaW0uaGVpZ2h0KTtcclxuXHJcbiAgICAvLyBkcmF3IGltYWdlICh0cmFuc2Zvcm1lZCwgcm90YXRlIGFuZCBzY2FsZWQpXHJcbiAgICBpZiAoIXRoaXMubG9hZGluZyAmJiB0aGlzLmxvYWRlZCkge1xyXG4gICAgICBjdHgudHJhbnNsYXRlKHRoaXMudmlld3BvcnQueCArIHRoaXMudmlld3BvcnQud2lkdGggLyAyLCB0aGlzLnZpZXdwb3J0LnkgKyB0aGlzLnZpZXdwb3J0LmhlaWdodCAvIDIpO1xyXG4gICAgICBjdHgucm90YXRlKHRoaXMudmlld3BvcnQucm90YXRpb24gKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgY3R4LnNjYWxlKHRoaXMudmlld3BvcnQuc2NhbGUsIHRoaXMudmlld3BvcnQuc2NhbGUpO1xyXG4gICAgICBjdHguZHJhd0ltYWdlKHRoaXMuX2ltYWdlLCAtdGhpcy5faW1hZ2Uud2lkdGggLyAyLCAtdGhpcy5faW1hZ2UuaGVpZ2h0IC8gMik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gJyMzMzMnO1xyXG4gICAgICBjdHguZm9udCA9ICcyNXB4IFZlcmRhbmEnO1xyXG4gICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgIGN0eC5maWxsVGV4dChjb25maWcubG9hZGluZ01lc3NhZ2UgfHwgJ0xvYWRpbmcuLi4nLCBjYW52YXNEaW0ud2lkdGggLyAyLCBjYW52YXNEaW0uaGVpZ2h0IC8gMik7XHJcbiAgICB9XHJcblxyXG4gICAgb25GaW5pc2goY3R4LCBjb25maWcsIGNhbnZhc0RpbSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25SZXNvdXJjZUNoYW5nZSgpIHsgcmV0dXJuIHRoaXMucmVzb3VyY2VDaGFuZ2UuYXNPYnNlcnZhYmxlKCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvU3F1YXJlQW5nbGUoYW5nbGU6IG51bWJlcikge1xyXG4gIHJldHVybiA5MCAqICgoTWF0aC50cnVuYyhhbmdsZSAvIDkwKSArIChNYXRoLnRydW5jKGFuZ2xlICUgOTApID4gNDUgPyAxIDogMCkpICUgNCk7XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVzb3VyY2VMb2FkZXIsIERpbWVuc2lvbiwgdG9TcXVhcmVBbmdsZSB9IGZyb20gJy4vaW1hZ2V2aWV3ZXIubW9kZWwnO1xyXG5pbXBvcnQgeyBJbWFnZVZpZXdlckNvbmZpZyB9IGZyb20gJy4vaW1hZ2V2aWV3ZXIuY29uZmlnJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbWFnZVJlc291cmNlTG9hZGVyIGV4dGVuZHMgUmVzb3VyY2VMb2FkZXIge1xyXG5cclxuICBzZXRVcCgpIHtcclxuICAgIHRoaXMubG9hZFJlc291cmNlKCk7XHJcbiAgfVxyXG5cclxuICBsb2FkUmVzb3VyY2UoKSB7XHJcbiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMucmVzb3VyY2VDaGFuZ2UubmV4dCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5zcmM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVEZWYge1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIHBhZ2U6IG51bWJlcjtcclxuICBpbWFnZTogYW55O1xyXG59XHJcblxyXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxyXG5leHBvcnQgY2xhc3MgSW1hZ2VDYWNoZVNlcnZpY2Uge1xyXG5cclxuICBwcml2YXRlIF9jYWNoZTogQ2FjaGVEZWZbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIGdldCBjYWNoZSgpOiBDYWNoZURlZltdIHtcclxuICAgIHJldHVybiB0aGlzLl9jYWNoZTtcclxuICB9XHJcblxyXG4gIGdldENhY2hlKHVybDogc3RyaW5nLCBwYWdlOiBudW1iZXIpIHtcclxuICAgIHJldHVybiB0aGlzLmNhY2hlLmZpbmQoaSA9PiBpLnVybCA9PT0gdXJsICYmIGkucGFnZSA9PT0gcGFnZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbWFnZSh1cmw6IHN0cmluZywgcGFnZTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBjID0gdGhpcy5nZXRDYWNoZSh1cmwsIHBhZ2UpO1xyXG4gICAgcmV0dXJuIGMgPyBjLmltYWdlIDogbnVsbDtcclxuICB9XHJcblxyXG4gIHNhdmVJbWFnZSh1cmw6IHN0cmluZywgcGFnZTogbnVtYmVyLCBpbWFnZTogYW55KSB7XHJcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuZ2V0Q2FjaGUodXJsLCBwYWdlKTtcclxuICAgIGlmIChjYWNoZSkge1xyXG4gICAgICBjYWNoZS5pbWFnZSA9IGltYWdlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jYWNoZS5wdXNoKHsgdXJsLCBwYWdlLCBpbWFnZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc3Bvc2VDYWNoZSgpIHtcclxuICAgIHRoaXMuY2FjaGUuZm9yRWFjaChpID0+IFVSTC5yZXZva2VPYmplY3RVUkwoaS5pbWFnZS5zcmMpKTtcclxuICAgIHRoaXMuX2NhY2hlID0gW107XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFJlc291cmNlTG9hZGVyLCBEaW1lbnNpb24sIHRvU3F1YXJlQW5nbGUgfSBmcm9tICcuL2ltYWdldmlld2VyLm1vZGVsJztcclxuaW1wb3J0IHsgSW1hZ2VDYWNoZVNlcnZpY2UgfSBmcm9tICcuL2ltYWdlY2FjaGUuc2VydmljZSc7XHJcbmltcG9ydCB7IEltYWdlVmlld2VyQ29uZmlnIH0gZnJvbSAnLi9pbWFnZXZpZXdlci5jb25maWcnO1xyXG5pbXBvcnQgeyBQREZKU1N0YXRpYywgUERGRG9jdW1lbnRQcm94eSwgUERGUGFnZVByb3h5IH0gZnJvbSAncGRmanMtZGlzdCc7XHJcblxyXG5kZWNsYXJlIHZhciBwZGZqc0xpYjogYW55O1xyXG5kZWNsYXJlIHZhciBwZGZqc1dvcmtlcjogYW55O1xyXG5cclxuZXhwb3J0IGNsYXNzIFBkZlJlc291cmNlTG9hZGVyIGV4dGVuZHMgUmVzb3VyY2VMb2FkZXIge1xyXG4gIHByaXZhdGUgX3BkZjogUERGRG9jdW1lbnRQcm94eTtcclxuICBwcml2YXRlIF9wYWdlOiBQREZQYWdlUHJveHk7XHJcbiAgcHJpdmF0ZSBfcGVuZGluZ1JlbG9hZDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfaW1hZ2VDYWNoZTogSW1hZ2VDYWNoZVNlcnZpY2UpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ1dvcmtlcicgaW4gd2luZG93KSB7XHJcbiAgICAgIGlmIChwZGZqc0xpYiAmJiBwZGZqc0xpYi5HbG9iYWxXb3JrZXJPcHRpb25zICYmICFwZGZqc0xpYi5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYykge1xyXG4gICAgICAgIHBkZmpzTGliLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjID0gcGRmanNXb3JrZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc2hvd0l0ZW1zUXVhbnRpdHkgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc2V0VXAoKSB7XHJcbiAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICBpZiAodm0ubG9hZGluZyB8fCAhdm0uc3JjKSB7IHJldHVybjsgfVxyXG4gICAgY29uc3QgbG9hZGluZ1Rhc2sgPSBwZGZqc0xpYi5nZXREb2N1bWVudCh2bS5zcmMpO1xyXG4gICAgdm0ubG9hZGluZyA9IHRydWU7XHJcbiAgICB2bS5jdXJyZW50SXRlbSA9IDE7XHJcbiAgICBsb2FkaW5nVGFzay50aGVuKChwZGY6IFBERkRvY3VtZW50UHJveHkpID0+IHtcclxuICAgICAgdm0uX3BkZiA9IHBkZjtcclxuICAgICAgdm0udG90YWxJdGVtID0gcGRmLm51bVBhZ2VzO1xyXG4gICAgICB2bS5sb2FkZWQgPSB0cnVlO1xyXG4gICAgICB2bS5sb2FkUmVzb3VyY2UoKTtcclxuICAgIH0sIChyZWFzb246IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxvYWRSZXNvdXJjZSgpIHtcclxuICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgIGlmICghdm0ubG9hZGVkKSB7XHJcbiAgICAgIHZtLl9wZW5kaW5nUmVsb2FkID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdm0ubG9hZGVkID0gZmFsc2U7XHJcbiAgICBjb25zdCB1cmwgPSB2bS5zcmM7XHJcbiAgICBjb25zdCBwYWdlID0gdm0uY3VycmVudEl0ZW07XHJcblxyXG4gICAgdm0uX3BkZi5nZXRQYWdlKHBhZ2UpLnRoZW4oKHBkZlBhZ2UpID0+IHtcclxuICAgICAgdm0uX3BhZ2UgPSBwZGZQYWdlO1xyXG4gICAgICB2bS5sb2FkSW1hZ2UodXJsLCBwYWdlLCAoKSA9PiB7XHJcbiAgICAgICAgdm0ubG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHZtLl9wZW5kaW5nUmVsb2FkKSB7XHJcbiAgICAgICAgICB2bS5fcGVuZGluZ1JlbG9hZCA9IGZhbHNlO1xyXG4gICAgICAgICAgdm0ubG9hZFJlc291cmNlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZtLnJlc291cmNlQ2hhbmdlLm5leHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGxvYWRJbWFnZShzcmM6IHN0cmluZywgcGFnZTogbnVtYmVyLCBvbkZpbmlzaDogKCkgPT4gdm9pZCkge1xyXG4gICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgY29uc3QgY2FjaGVpbWcgPSB2bS5faW1hZ2VDYWNoZS5nZXRJbWFnZShzcmMsIHBhZ2UpO1xyXG4gICAgaWYgKGNhY2hlaW1nKSB7XHJcbiAgICAgIHZtLl9pbWFnZSA9IGNhY2hlaW1nO1xyXG4gICAgICBvbkZpbmlzaCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgY29uc3QgcGFnZVZwID0gdm0uX3BhZ2UuZ2V0Vmlld3BvcnQoMik7XHJcblxyXG4gICAgY2FudmFzLndpZHRoID0gcGFnZVZwLndpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IHBhZ2VWcC5oZWlnaHQ7XHJcblxyXG4gICAgY29uc3QgcmVuZGVyQ29udGV4dCA9IHtcclxuICAgICAgY2FudmFzQ29udGV4dDogY29udGV4dCxcclxuICAgICAgdmlld3BvcnQ6IHBhZ2VWcFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbmRlclRhc2sgPSB2bS5fcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCk7XHJcbiAgICByZW5kZXJUYXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICBjYW52YXMudG9CbG9iKGJsb2IgPT4ge1xyXG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGltZy5vbmxvYWQgPSBvbkZpbmlzaDtcclxuICAgICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICB2bS5faW1hZ2VDYWNoZS5zYXZlSW1hZ2Uoc3JjLCBwYWdlLCBpbWcpO1xyXG4gICAgICAgIHZtLl9pbWFnZSA9IGltZztcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBBZnRlclZpZXdJbml0LCBSZW5kZXJlcjIsIEluamVjdCwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERvbVNhbml0aXplciB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IEltYWdlVmlld2VyQ29uZmlnLCBJTUFHRVZJRVdFUl9DT05GSUcsIElNQUdFVklFV0VSX0NPTkZJR19ERUZBVUxULCBCdXR0b25Db25maWcsIEJ1dHRvblN0eWxlIH0gZnJvbSAnLi9pbWFnZXZpZXdlci5jb25maWcnO1xyXG5pbXBvcnQgeyBWaWV3cG9ydCwgQnV0dG9uLCB0b1NxdWFyZUFuZ2xlLCBSZXNvdXJjZUxvYWRlciB9IGZyb20gJy4vaW1hZ2V2aWV3ZXIubW9kZWwnO1xyXG5pbXBvcnQgeyBJbWFnZVJlc291cmNlTG9hZGVyIH0gZnJvbSAnLi9pbWFnZS5sb2FkZXInO1xyXG5pbXBvcnQgeyBJbWFnZUNhY2hlU2VydmljZSB9IGZyb20gJy4vaW1hZ2VjYWNoZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUGRmUmVzb3VyY2VMb2FkZXIgfSBmcm9tICcuL3BkZi5sb2FkZXInO1xyXG5cclxuY29uc3QgTUlOX1RPT0xUSVBfV0lEVEhfU1BBQ0UgPSA1MDA7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ25neC1pbWFnZXZpZXdlcicsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxjYW52YXMgI2ltYWdlQ29udGFpbmVyIFt3aWR0aF09XCJ3aWR0aFwiIFtoZWlnaHRdPVwiaGVpZ2h0XCJcclxuICAgICAgKHRhcCk9XCJvblRhcCgkZXZlbnQpXCIgKHBpbmNoaW4pPVwicHJvY2Vzc1RvdWNoRXZlbnQoJGV2ZW50KVwiIChwaW5jaG91dCk9XCJwcm9jZXNzVG91Y2hFdmVudCgkZXZlbnQpXCJcclxuICAgICAgKHBhbm1vdmUpPVwicHJvY2Vzc1RvdWNoRXZlbnQoJGV2ZW50KVwiIChwYW5lbmQpPVwib25Ub3VjaEVuZCgpXCIgKHJvdGF0ZW1vdmUpPVwicHJvY2Vzc1RvdWNoRXZlbnQoJGV2ZW50KVwiXHJcbiAgICAgICAgKHJvdGF0ZWVuZCk9XCJvblRvdWNoRW5kKClcIj5cclxuICAgIDwvY2FudmFzPlxyXG4gIGAsXHJcbiAgc3R5bGVzOiBbYFxyXG4gICAgOmhvc3QgeyBkaXNwbGF5OiBibG9jayB9XHJcbiAgICA6aG9zdCBjYW52YXMgeyBtYXJnaW46IDAgYXV0bzsgZGlzcGxheTogYmxvY2sgfVxyXG4gICAgW2hpZGRlbl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQgfVxyXG4gIGBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBJbWFnZVZpZXdlckNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcblxyXG4gIC8vI3JlZ2lvbiBJbnB1dCBwcm9wZXJ0aWVzXHJcbiAgcHJpdmF0ZSBfc3JjOiBzdHJpbmcgfCBGaWxlO1xyXG4gIGdldCBzcmMoKSB7IHJldHVybiB0aGlzLl9zcmM7IH1cclxuICBASW5wdXQoJ3NyYycpIHNldCBzcmModmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5fc3JjKSB7IHJldHVybjsgfVxyXG4gICAgdGhpcy5fc3JjID0gdmFsdWU7XHJcbiAgICB0aGlzLnNldFVwUmVzb3VyY2UoKTtcclxuICB9XHJcblxyXG4gIC8vIEZJWCBub3Qgd29ya2lnbiBwcm9wZXJseVxyXG4gIHByaXZhdGUgX2ZpbGV0eXBlOiBzdHJpbmc7XHJcbiAgZ2V0IGZpbGV0eXBlKCkgeyByZXR1cm4gdGhpcy5fZmlsZXR5cGU7IH1cclxuICBASW5wdXQoJ2ZpbGV0eXBlJykgc2V0IGZpbGV0eXBlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5fZmlsZXR5cGUpIHsgcmV0dXJuOyB9XHJcbiAgICB0aGlzLl9maWxldHlwZSA9IHZhbHVlO1xyXG4gICAgdGhpcy5zZXRVcFJlc291cmNlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xyXG4gIGdldCB3aWR0aCgpIHsgcmV0dXJuIHRoaXMuX3dpZHRoOyB9XHJcbiAgQElucHV0KCd3aWR0aCcpIHNldCB3aWR0aCh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlID09PSB0aGlzLl93aWR0aCkgeyByZXR1cm47IH1cclxuICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XHJcbiAgICBpZiAodGhpcy5fY2FudmFzKSB7IHRoaXMuX2NhbnZhcy53aWR0aCA9IHRoaXMuX3dpZHRoOyB9XHJcbiAgICB0aGlzLnJlc2V0SW1hZ2UoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyO1xyXG4gIGdldCBoZWlnaHQoKSB7IHJldHVybiB0aGlzLl9oZWlnaHQ7IH1cclxuICBASW5wdXQoJ2hlaWdodCcpIHNldCBoZWlnaHQodmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5faGVpZ2h0KSB7IHJldHVybjsgfVxyXG4gICAgdGhpcy5faGVpZ2h0ID0gdmFsdWU7XHJcbiAgICBpZiAodGhpcy5fY2FudmFzKSB7IHRoaXMuX2NhbnZhcy5oZWlnaHQgPSB0aGlzLl9oZWlnaHQ7IH1cclxuICAgIHRoaXMucmVzZXRJbWFnZSgpO1xyXG4gIH1cclxuXHJcbiAgQFZpZXdDaGlsZCgnaW1hZ2VDb250YWluZXInKSBjYW52YXNSZWY6IGFueTtcclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIFByaXZhdGUgcHJvcGVydGllc1xyXG4gIC8vIENhbnZhcyAyRCBjb250ZXh0XHJcbiAgcHJpdmF0ZSBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICBwcml2YXRlIF9jb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gIC8vIGRpcnR5IHN0YXRlXHJcbiAgcHJpdmF0ZSBfZGlydHkgPSB0cnVlO1xyXG5cclxuICAvLyBhY3Rpb24gYnV0dG9uc1xyXG4gIHByaXZhdGUgX25leHRQYWdlQnV0dG9uOiBCdXR0b247XHJcbiAgcHJpdmF0ZSBfYmVmb3JlUGFnZUJ1dHRvbjogQnV0dG9uO1xyXG4gIHByaXZhdGUgX3pvb21PdXRCdXR0b246IEJ1dHRvbjtcclxuICBwcml2YXRlIF96b29tSW5CdXR0b246IEJ1dHRvbjtcclxuICBwcml2YXRlIF9yb3RhdGVMZWZ0QnV0dG9uOiBCdXR0b247XHJcbiAgcHJpdmF0ZSBfcm90YXRlUmlnaHRCdXR0b246IEJ1dHRvbjtcclxuICBwcml2YXRlIF9yZXNldEJ1dHRvbjogQnV0dG9uO1xyXG5cclxuICAvLyBjb250YWlucyBhbGwgYWN0aXZlIGJ1dHRvbnNcclxuICBwcml2YXRlIF9idXR0b25zID0gW107XHJcblxyXG4gIC8vIGN1cnJlbnQgdG9vbCB0aXAgKHVzZWQgdG8gdHJhY2sgY2hhbmdlIG9mIHRvb2wgdGlwKVxyXG4gIHByaXZhdGUgX2N1cnJlbnRUb29sdGlwID0gbnVsbDtcclxuXHJcbiAgLy8gY2FjaGVkIGRhdGEgd2hlbiB0b3VjaCBldmVudHMgc3RhcnRlZFxyXG4gIHByaXZhdGUgX3RvdWNoU3RhcnRTdGF0ZTogYW55ID0ge307XHJcblxyXG4gIC8vIGxpc3Qgb2YgZXZlbnQgbGlzdGVuZXIgZGVzdHJveWVyc1xyXG4gIHByaXZhdGUgX2xpc3RlbkRlc3Ryb3lMaXN0ID0gW107XHJcblxyXG4gIC8vIGltYWdlIC8gUGRmIERyYXdhYmxlIFJlc291cmNlXHJcbiAgcHJpdmF0ZSBfcmVzb3VyY2U6IFJlc291cmNlTG9hZGVyO1xyXG4gIHByaXZhdGUgX3Jlc291cmNlQ2hhbmdlU3ViOiBTdWJzY3JpcHRpb247XHJcblxyXG4gIC8vIENhY2hpbmcgcmVzb3VyY2VMb2FkZXIgaW5zdGFuY2VzIHRvIHJldXNlXHJcbiAgcHJpdmF0ZSBfaW1hZ2VSZXNvdXJjZTogSW1hZ2VSZXNvdXJjZUxvYWRlcjtcclxuICBwcml2YXRlIF9wZGZSZXNvdXJjZTogUGRmUmVzb3VyY2VMb2FkZXI7XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gTGlmZWN5Y2xlIGV2ZW50c1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBfc2FuaXRpemVyOiBEb21TYW5pdGl6ZXIsXHJcbiAgICBwcml2YXRlIF9yZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgcHJpdmF0ZSBfaW1hZ2VDYWNoZTogSW1hZ2VDYWNoZVNlcnZpY2UsXHJcbiAgICBASW5qZWN0KElNQUdFVklFV0VSX0NPTkZJRykgcHJpdmF0ZSBjb25maWc6IEltYWdlVmlld2VyQ29uZmlnXHJcbiAgKSB7XHJcbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZXh0ZW5kc0RlZmF1bHRDb25maWcoY29uZmlnKTtcclxuICAgIHRoaXMuX25leHRQYWdlQnV0dG9uID0gbmV3IEJ1dHRvbih0aGlzLmNvbmZpZy5uZXh0UGFnZUJ1dHRvbiwgdGhpcy5jb25maWcuYnV0dG9uU3R5bGUpO1xyXG4gICAgdGhpcy5fYmVmb3JlUGFnZUJ1dHRvbiA9IG5ldyBCdXR0b24odGhpcy5jb25maWcuYmVmb3JlUGFnZUJ1dHRvbiwgdGhpcy5jb25maWcuYnV0dG9uU3R5bGUpO1xyXG4gICAgdGhpcy5fem9vbU91dEJ1dHRvbiA9IG5ldyBCdXR0b24odGhpcy5jb25maWcuem9vbU91dEJ1dHRvbiwgdGhpcy5jb25maWcuYnV0dG9uU3R5bGUpO1xyXG4gICAgdGhpcy5fem9vbUluQnV0dG9uID0gbmV3IEJ1dHRvbih0aGlzLmNvbmZpZy56b29tSW5CdXR0b24sIHRoaXMuY29uZmlnLmJ1dHRvblN0eWxlKTtcclxuICAgIHRoaXMuX3JvdGF0ZUxlZnRCdXR0b24gPSBuZXcgQnV0dG9uKHRoaXMuY29uZmlnLnJvdGF0ZUxlZnRCdXR0b24sIHRoaXMuY29uZmlnLmJ1dHRvblN0eWxlKTtcclxuICAgIHRoaXMuX3JvdGF0ZVJpZ2h0QnV0dG9uID0gbmV3IEJ1dHRvbih0aGlzLmNvbmZpZy5yb3RhdGVSaWdodEJ1dHRvbiwgdGhpcy5jb25maWcuYnV0dG9uU3R5bGUpO1xyXG4gICAgdGhpcy5fcmVzZXRCdXR0b24gPSBuZXcgQnV0dG9uKHRoaXMuY29uZmlnLnJlc2V0QnV0dG9uLCB0aGlzLmNvbmZpZy5idXR0b25TdHlsZSk7XHJcbiAgICB0aGlzLl9idXR0b25zID0gW1xyXG4gICAgICB0aGlzLl96b29tT3V0QnV0dG9uLFxyXG4gICAgICB0aGlzLl96b29tSW5CdXR0b24sXHJcbiAgICAgIHRoaXMuX3JvdGF0ZUxlZnRCdXR0b24sXHJcbiAgICAgIHRoaXMuX3JvdGF0ZVJpZ2h0QnV0dG9uLFxyXG4gICAgICB0aGlzLl9yZXNldEJ1dHRvblxyXG4gICAgXS5maWx0ZXIoaXRlbSA9PiBpdGVtLmRpc3BsYXkpXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnNvcnRJZCAtIGIuc29ydElkKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRoaXMuX2NhbnZhcyA9IHRoaXMuY2FudmFzUmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgLy8gc2V0dGluZyBjYW52YXMgZGltZW50aW9uXHJcbiAgICB0aGlzLl9jYW52YXMud2lkdGggPSB0aGlzLndpZHRoIHx8IHRoaXMuY29uZmlnLndpZHRoO1xyXG4gICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0IHx8IHRoaXMuY29uZmlnLmhlaWdodDtcclxuXHJcbiAgICAvLyBzZXR0aW5nIGJ1dHRvbnMgYWN0aW9uc1xyXG4gICAgdGhpcy5fbmV4dFBhZ2VCdXR0b24ub25DbGljayA9IChldnQpID0+IHsgdGhpcy5uZXh0UGFnZSgpOyByZXR1cm4gZmFsc2U7IH07XHJcbiAgICB0aGlzLl9iZWZvcmVQYWdlQnV0dG9uLm9uQ2xpY2sgPSAoZXZ0KSA9PiB7IHRoaXMucHJldmlvdXNQYWdlKCk7IHJldHVybiBmYWxzZTsgfTtcclxuICAgIHRoaXMuX3pvb21PdXRCdXR0b24ub25DbGljayA9IChldnQpID0+IHsgdGhpcy56b29tT3V0KCk7IHJldHVybiBmYWxzZTsgfTtcclxuICAgIHRoaXMuX3pvb21JbkJ1dHRvbi5vbkNsaWNrID0gKGV2dCkgPT4geyB0aGlzLnpvb21JbigpOyByZXR1cm4gZmFsc2U7IH07XHJcbiAgICB0aGlzLl9yb3RhdGVMZWZ0QnV0dG9uLm9uQ2xpY2sgPSAoZXZ0KSA9PiB7IHRoaXMucm90YXRlTGVmdCgpOyByZXR1cm4gZmFsc2U7IH07XHJcbiAgICB0aGlzLl9yb3RhdGVSaWdodEJ1dHRvbi5vbkNsaWNrID0gKGV2dCkgPT4geyB0aGlzLnJvdGF0ZVJpZ2h0KCk7IHJldHVybiBmYWxzZTsgfTtcclxuICAgIHRoaXMuX3Jlc2V0QnV0dG9uLm9uQ2xpY2sgPSAoZXZ0KSA9PiB7IHRoaXMucmVzZXRJbWFnZSgpOyByZXR1cm4gZmFsc2U7IH07XHJcblxyXG4gICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy51cGRhdGVDYW52YXMoKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgLy8gdW5yZWdpc3RlIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fbGlzdGVuRGVzdHJveUxpc3QuZm9yRWFjaChsaXN0ZW5EZXN0cm95ID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5EZXN0cm95ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgbGlzdGVuRGVzdHJveSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2ltYWdlQ2FjaGUuZGlzcG9zZUNhY2hlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRVcFJlc291cmNlKCkge1xyXG4gICAgaWYgKHRoaXMuaXNJbWFnZSh0aGlzLnNyYykgJiYgKCF0aGlzLl9yZXNvdXJjZSB8fCAhKHRoaXMuX3Jlc291cmNlIGluc3RhbmNlb2YgSW1hZ2VSZXNvdXJjZUxvYWRlcikpKSB7XHJcbiAgICAgIGlmICh0aGlzLl9yZXNvdXJjZUNoYW5nZVN1Yikge1xyXG4gICAgICAgIHRoaXMuX3Jlc291cmNlQ2hhbmdlU3ViLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLl9pbWFnZVJlc291cmNlKSB7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VSZXNvdXJjZSA9IG5ldyBJbWFnZVJlc291cmNlTG9hZGVyKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fcmVzb3VyY2UgPSB0aGlzLl9pbWFnZVJlc291cmNlO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUGRmKHRoaXMuc3JjKSAmJiAoIXRoaXMuX3Jlc291cmNlIHx8ICEodGhpcy5fcmVzb3VyY2UgaW5zdGFuY2VvZiBQZGZSZXNvdXJjZUxvYWRlcikpKSB7XHJcbiAgICAgIGlmICh0aGlzLl9yZXNvdXJjZUNoYW5nZVN1Yikge1xyXG4gICAgICAgIHRoaXMuX3Jlc291cmNlQ2hhbmdlU3ViLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLl9wZGZSZXNvdXJjZSkge1xyXG4gICAgICAgIHRoaXMuX3BkZlJlc291cmNlID0gbmV3IFBkZlJlc291cmNlTG9hZGVyKHRoaXMuX2ltYWdlQ2FjaGUpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX3Jlc291cmNlID0gdGhpcy5fcGRmUmVzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fcmVzb3VyY2UpIHtcclxuICAgICAgdGhpcy5fcmVzb3VyY2Uuc3JjID0gdGhpcy5zcmMgaW5zdGFuY2VvZiBGaWxlID8gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLnNyYykgOiB0aGlzLnNyYztcclxuICAgICAgdGhpcy5fcmVzb3VyY2VDaGFuZ2VTdWIgPSB0aGlzLl9yZXNvdXJjZS5vblJlc291cmNlQ2hhbmdlKCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNhbnZhcygpO1xyXG4gICAgICAgIGlmICh0aGlzLnNyYyBpbnN0YW5jZW9mIEZpbGUpIHtcclxuICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5fcmVzb3VyY2Uuc3JjKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9yZXNvdXJjZS5zZXRVcCgpO1xyXG4gICAgICB0aGlzLnJlc2V0SW1hZ2UoKTtcclxuICAgICAgaWYgKHRoaXMuX2NvbnRleHQpIHsgdGhpcy51cGRhdGVDYW52YXMoKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIFRvdWNoIGV2ZW50c1xyXG4gIG9uVGFwKGV2dCkge1xyXG4gICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IHRoaXMuZ2V0VUlFbGVtZW50KHRoaXMuc2NyZWVuVG9DYW52YXNDZW50cmUoZXZ0LmNlbnRlcikpO1xyXG4gICAgaWYgKGFjdGl2ZUVsZW1lbnQgIT09IG51bGwpIHsgYWN0aXZlRWxlbWVudC5vbkNsaWNrKGV2dCk7IH1cclxuICB9XHJcblxyXG4gIG9uVG91Y2hFbmQoKSB7XHJcbiAgICB0aGlzLl90b3VjaFN0YXJ0U3RhdGUudmlld3BvcnQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl90b3VjaFN0YXJ0U3RhdGUuc2NhbGUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl90b3VjaFN0YXJ0U3RhdGUucm90YXRlID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgcHJvY2Vzc1RvdWNoRXZlbnQoZXZ0KSB7XHJcbiAgICAvLyBwcm9jZXNzIHBhblxyXG4gICAgaWYgKCF0aGlzLl90b3VjaFN0YXJ0U3RhdGUudmlld3BvcnQpIHsgdGhpcy5fdG91Y2hTdGFydFN0YXRlLnZpZXdwb3J0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVzb3VyY2Uudmlld3BvcnQpOyB9XHJcblxyXG4gICAgY29uc3Qgdmlld3BvcnQgPSB0aGlzLl9yZXNvdXJjZS52aWV3cG9ydDtcclxuICAgIHZpZXdwb3J0LnggPSB0aGlzLl90b3VjaFN0YXJ0U3RhdGUudmlld3BvcnQueCArIGV2dC5kZWx0YVg7XHJcbiAgICB2aWV3cG9ydC55ID0gdGhpcy5fdG91Y2hTdGFydFN0YXRlLnZpZXdwb3J0LnkgKyBldnQuZGVsdGFZO1xyXG5cclxuICAgIC8vIHByb2Nlc3MgcGluY2ggaW4vb3V0XHJcbiAgICBpZiAoIXRoaXMuX3RvdWNoU3RhcnRTdGF0ZS5zY2FsZSkgeyB0aGlzLl90b3VjaFN0YXJ0U3RhdGUuc2NhbGUgPSB0aGlzLl9yZXNvdXJjZS52aWV3cG9ydC5zY2FsZTsgfVxyXG4gICAgY29uc3QgbmV3U2NhbGUgPSB0aGlzLl90b3VjaFN0YXJ0U3RhdGUuc2NhbGUgKiBldnQuc2NhbGU7XHJcbiAgICB2aWV3cG9ydC5zY2FsZSA9IG5ld1NjYWxlID4gdGhpcy5fcmVzb3VyY2UubWF4U2NhbGUgPyB0aGlzLl9yZXNvdXJjZS5tYXhTY2FsZSA6XHJcbiAgICAgIG5ld1NjYWxlIDwgdGhpcy5fcmVzb3VyY2UubWluU2NhbGUgPyB0aGlzLl9yZXNvdXJjZS5taW5TY2FsZSA6IG5ld1NjYWxlO1xyXG5cclxuICAgIC8vIHByb2Nlc3Mgcm90YXRlIGxlZnQvcmlnaHRcclxuICAgIGlmICghdGhpcy5fdG91Y2hTdGFydFN0YXRlLnJvdGF0ZSkgeyB0aGlzLl90b3VjaFN0YXJ0U3RhdGUucm90YXRlID0geyByb3RhdGlvbjogdmlld3BvcnQucm90YXRpb24sIHN0YXJ0Um90YXRlOiBldnQucm90YXRpb24gfTsgfVxyXG4gICAgaWYgKGV2dC5yb3RhdGlvbiAhPT0gMCkge1xyXG4gICAgICBjb25zdCBuZXdBbmdsZSA9IHRoaXMuX3RvdWNoU3RhcnRTdGF0ZS5yb3RhdGUucm90YXRpb24gKyBldnQucm90YXRpb24gLSB0aGlzLl90b3VjaFN0YXJ0U3RhdGUucm90YXRlLnN0YXJ0Um90YXRlO1xyXG4gICAgICB2aWV3cG9ydC5yb3RhdGlvbiA9IHRoaXMuY29uZmlnLnJvdGF0ZVN0ZXBwZXIgPyB0b1NxdWFyZUFuZ2xlKG5ld0FuZ2xlKSA6IG5ld0FuZ2xlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIE1vdXNlIEV2ZW50c1xyXG4gIHByaXZhdGUgYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyB6b29taW5nXHJcbiAgICB0aGlzLl9saXN0ZW5EZXN0cm95TGlzdC5wdXNoKHRoaXMuX3JlbmRlcmVyLmxpc3Rlbih0aGlzLl9jYW52YXMsICdET01Nb3VzZVNjcm9sbCcsIChldnQpID0+IHRoaXMub25Nb3VzZVdoZWVsKGV2dCkpKTtcclxuICAgIHRoaXMuX2xpc3RlbkRlc3Ryb3lMaXN0LnB1c2godGhpcy5fcmVuZGVyZXIubGlzdGVuKHRoaXMuX2NhbnZhcywgJ21vdXNld2hlZWwnLCAoZXZ0KSA9PiB0aGlzLm9uTW91c2VXaGVlbChldnQpKSk7XHJcblxyXG4gICAgLy8gc2hvdyB0b29sdGlwIHdoZW4gbW91c2VvdmVyIGl0XHJcbiAgICB0aGlzLl9saXN0ZW5EZXN0cm95TGlzdC5wdXNoKHRoaXMuX3JlbmRlcmVyLmxpc3Rlbih0aGlzLl9jYW52YXMsICdtb3VzZW1vdmUnLCAoZXZ0KSA9PlxyXG4gICAgICB0aGlzLmNoZWNrVG9vbHRpcEFjdGl2YXRpb24odGhpcy5zY3JlZW5Ub0NhbnZhc0NlbnRyZSh7IHg6IGV2dC5jbGllbnRYLCB5OiBldnQuY2xpZW50WSB9KSlcclxuICAgICkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk1vdXNlV2hlZWwoZXZ0KSB7XHJcbiAgICBpZiAoIWV2dCkgeyBldnQgPSBldmVudDsgfVxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZXZ0LmRldGFpbCA8IDAgfHwgZXZ0LndoZWVsRGVsdGEgPiAwKSB7IC8vIHVwIC0+IGxhcmdlclxyXG4gICAgICB0aGlzLnpvb21JbigpO1xyXG4gICAgfSBlbHNlIHsgLy8gZG93biAtPiBzbWFsbGVyXHJcbiAgICAgIHRoaXMuem9vbU91dCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGVja1Rvb2x0aXBBY3RpdmF0aW9uKHBvczogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9KSB7XHJcbiAgICB0aGlzLmdldFVJRWxlbWVudHMoKS5mb3JFYWNoKHggPT4geC5ob3ZlciA9IGZhbHNlKTtcclxuICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSB0aGlzLmdldFVJRWxlbWVudChwb3MpO1xyXG4gICAgY29uc3Qgb2xkVG9vbFRpcCA9IHRoaXMuX2N1cnJlbnRUb29sdGlwO1xyXG4gICAgaWYgKGFjdGl2ZUVsZW1lbnQgIT09IG51bGwpIHtcclxuICAgICAgaWYgKHR5cGVvZiBhY3RpdmVFbGVtZW50LmhvdmVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGFjdGl2ZUVsZW1lbnQuaG92ZXIgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgYWN0aXZlRWxlbWVudC50b29sdGlwICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRUb29sdGlwID0gYWN0aXZlRWxlbWVudC50b29sdGlwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAob2xkVG9vbFRpcCAhPT0gdGhpcy5fY3VycmVudFRvb2x0aXApIHsgdGhpcy5fZGlydHkgPSB0cnVlOyB9XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gQnV0dG9uIEFjdGlvbnNcclxuXHJcbiAgcHJpdmF0ZSBuZXh0UGFnZSgpIHtcclxuICAgIGlmICghdGhpcy5fcmVzb3VyY2UpIHsgcmV0dXJuOyB9XHJcbiAgICBpZiAodGhpcy5fcmVzb3VyY2UuY3VycmVudEl0ZW0gPj0gdGhpcy5fcmVzb3VyY2UudG90YWxJdGVtKSB7IHJldHVybjsgfVxyXG4gICAgaWYgKHRoaXMuX3Jlc291cmNlLmN1cnJlbnRJdGVtIDwgMSkgeyB0aGlzLl9yZXNvdXJjZS5jdXJyZW50SXRlbSA9IDA7IH1cclxuICAgIHRoaXMuX3Jlc291cmNlLmN1cnJlbnRJdGVtKys7XHJcbiAgICB0aGlzLl9yZXNvdXJjZS5sb2FkUmVzb3VyY2UoKTtcclxuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJldmlvdXNQYWdlKCkge1xyXG4gICAgaWYgKCF0aGlzLl9yZXNvdXJjZSkgeyByZXR1cm47IH1cclxuICAgIGlmICh0aGlzLl9yZXNvdXJjZS5jdXJyZW50SXRlbSA8PSAxKSB7IHJldHVybjsgfVxyXG4gICAgaWYgKHRoaXMuX3Jlc291cmNlLmN1cnJlbnRJdGVtID4gdGhpcy5fcmVzb3VyY2UudG90YWxJdGVtKSB7IHRoaXMuX3Jlc291cmNlLmN1cnJlbnRJdGVtID0gdGhpcy5fcmVzb3VyY2UudG90YWxJdGVtICsgMTsgfVxyXG4gICAgdGhpcy5fcmVzb3VyY2UuY3VycmVudEl0ZW0tLTtcclxuICAgIHRoaXMuX3Jlc291cmNlLmxvYWRSZXNvdXJjZSgpO1xyXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB6b29tSW4oKSB7XHJcbiAgICBpZiAoIXRoaXMuX3Jlc291cmNlKSB7IHJldHVybjsgfVxyXG4gICAgY29uc3QgbmV3U2NhbGUgPSB0aGlzLl9yZXNvdXJjZS52aWV3cG9ydC5zY2FsZSAqICgxICsgdGhpcy5jb25maWcuc2NhbGVTdGVwKTtcclxuICAgIHRoaXMuX3Jlc291cmNlLnZpZXdwb3J0LnNjYWxlID0gbmV3U2NhbGUgPiB0aGlzLl9yZXNvdXJjZS5tYXhTY2FsZSA/IHRoaXMuX3Jlc291cmNlLm1heFNjYWxlIDogbmV3U2NhbGU7XHJcbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHpvb21PdXQoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3Jlc291cmNlKSB7IHJldHVybjsgfVxyXG4gICAgY29uc3QgbmV3U2NhbGUgPSB0aGlzLl9yZXNvdXJjZS52aWV3cG9ydC5zY2FsZSAqICgxIC0gdGhpcy5jb25maWcuc2NhbGVTdGVwKTtcclxuICAgIHRoaXMuX3Jlc291cmNlLnZpZXdwb3J0LnNjYWxlID0gbmV3U2NhbGUgPCB0aGlzLl9yZXNvdXJjZS5taW5TY2FsZSA/IHRoaXMuX3Jlc291cmNlLm1pblNjYWxlIDogbmV3U2NhbGU7XHJcbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJvdGF0ZUxlZnQoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3Jlc291cmNlKSB7IHJldHVybjsgfVxyXG4gICAgY29uc3Qgdmlld3BvcnQgPSB0aGlzLl9yZXNvdXJjZS52aWV3cG9ydDtcclxuICAgIHZpZXdwb3J0LnJvdGF0aW9uID0gdmlld3BvcnQucm90YXRpb24gPT09IDAgPyAyNzAgOiB2aWV3cG9ydC5yb3RhdGlvbiAtIDkwO1xyXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByb3RhdGVSaWdodCgpIHtcclxuICAgIGlmICghdGhpcy5fcmVzb3VyY2UpIHsgcmV0dXJuOyB9XHJcbiAgICBjb25zdCB2aWV3cG9ydCA9IHRoaXMuX3Jlc291cmNlLnZpZXdwb3J0O1xyXG4gICAgdmlld3BvcnQucm90YXRpb24gPSB2aWV3cG9ydC5yb3RhdGlvbiA9PT0gMjcwID8gMCA6IHZpZXdwb3J0LnJvdGF0aW9uICsgOTA7XHJcbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlc2V0SW1hZ2UoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3Jlc291cmNlKSB7IHJldHVybjsgfVxyXG4gICAgdGhpcy5fcmVzb3VyY2UucmVzZXRWaWV3cG9ydCh0aGlzLl9jYW52YXMpO1xyXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIERyYXcgQ2FudmFzXHJcbiAgcHJpdmF0ZSB1cGRhdGVDYW52YXMoKSB7XHJcbiAgICB0aGlzLnJlc2V0SW1hZ2UoKTtcclxuXHJcbiAgICAvLyBzdGFydCBuZXcgcmVuZGVyIGxvb3BcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgIC8vIG9ubHkgcmUtcmVuZGVyIGlmIGRpcnR5XHJcbiAgICBpZiAodGhpcy5fZGlydHkgJiYgdGhpcy5fcmVzb3VyY2UpIHtcclxuICAgICAgdGhpcy5fZGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2NvbnRleHQ7XHJcbiAgICAgIGN0eC5zYXZlKCk7XHJcblxyXG4gICAgICB0aGlzLl9yZXNvdXJjZS5kcmF3KGN0eCwgdGhpcy5jb25maWcsIHRoaXMuX2NhbnZhcywgKCkgPT4ge1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgICAgIGlmICh2bS5fcmVzb3VyY2UubG9hZGVkKSB7XHJcbiAgICAgICAgICAvLyBkcmF3IGJ1dHRvbnNcclxuICAgICAgICAgIHRoaXMuZHJhd0J1dHRvbnMoY3R4KTtcclxuXHJcbiAgICAgICAgICAvLyBkcmF3IHBhZ2luYXRvclxyXG4gICAgICAgICAgaWYgKHRoaXMuX3Jlc291cmNlLnNob3dJdGVtc1F1YW50aXR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1BhZ2luYXRvcihjdHgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5yZW5kZXIoKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRyYXdCdXR0b25zKGN0eCkge1xyXG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMuY29uZmlnLnRvb2x0aXBzLnBhZGRpbmc7XHJcbiAgICBjb25zdCByYWRpdXMgPSB0aGlzLmNvbmZpZy50b29sdGlwcy5yYWRpdXM7XHJcbiAgICBjb25zdCBnYXAgPSAyICogcmFkaXVzICsgcGFkZGluZztcclxuICAgIGNvbnN0IHggPSB0aGlzLl9jYW52YXMud2lkdGggLSByYWRpdXMgLSBwYWRkaW5nO1xyXG4gICAgY29uc3QgeSA9IHRoaXMuX2NhbnZhcy5oZWlnaHQgLSByYWRpdXMgLSBwYWRkaW5nO1xyXG5cclxuICAgIC8vIGRyYXcgYnV0dG9uc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9idXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbnNbaV0uZHJhdyhjdHgsIHgsIHkgLSBnYXAgKiBpLCByYWRpdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYXcgdG9vbHRpcFxyXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRUb29sdGlwICE9PSBudWxsICYmIHRoaXMuX2NhbnZhcy53aWR0aCA+IE1JTl9UT09MVElQX1dJRFRIX1NQQUNFKSB7XHJcbiAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgIGNvbnN0IGZvbnRTaXplID0gcmFkaXVzO1xyXG4gICAgICBjdHguZm9udCA9IGZvbnRTaXplICsgJ3B4IHNhbnMtc2VyaWYnO1xyXG5cclxuICAgICAgLy8gY2FsY3VsYXRlIHBvc2l0aW9uXHJcbiAgICAgIGNvbnN0IHRleHRTaXplID0gY3R4Lm1lYXN1cmVUZXh0KHRoaXMuX2N1cnJlbnRUb29sdGlwKS53aWR0aFxyXG4gICAgICAgICwgcmVjdFdpZHRoID0gdGV4dFNpemUgKyBwYWRkaW5nXHJcbiAgICAgICAgLCByZWN0SGVpZ2h0ID0gZm9udFNpemUgKiAwLjcwICsgcGFkZGluZ1xyXG4gICAgICAgICwgcmVjdFggPSB0aGlzLl9jYW52YXMud2lkdGhcclxuICAgICAgICAgIC0gKDIgKiByYWRpdXMgKyAyICogcGFkZGluZykgLy8gYnV0dG9uc1xyXG4gICAgICAgICAgLSByZWN0V2lkdGhcclxuICAgICAgICAsIHJlY3RZID0gdGhpcy5fY2FudmFzLmhlaWdodCAtIHJlY3RIZWlnaHQgLSBwYWRkaW5nXHJcbiAgICAgICAgLCB0ZXh0WCA9IHJlY3RYICsgMC41ICogcGFkZGluZ1xyXG4gICAgICAgICwgdGV4dFkgPSB0aGlzLl9jYW52YXMuaGVpZ2h0IC0gMS41ICogcGFkZGluZztcclxuXHJcbiAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHRoaXMuY29uZmlnLnRvb2x0aXBzLmJnQWxwaGE7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbmZpZy50b29sdGlwcy5iZ1N0eWxlO1xyXG4gICAgICB0aGlzLmRyYXdSb3VuZFJlY3RhbmdsZShjdHgsIHJlY3RYLCByZWN0WSwgcmVjdFdpZHRoLCByZWN0SGVpZ2h0LCA4LCB0cnVlLCBmYWxzZSk7XHJcblxyXG4gICAgICBjdHguZ2xvYmFsQWxwaGEgPSB0aGlzLmNvbmZpZy50b29sdGlwcy50ZXh0QWxwaGE7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbmZpZy50b29sdGlwcy50ZXh0U3R5bGU7XHJcbiAgICAgIGN0eC5maWxsVGV4dCh0aGlzLl9jdXJyZW50VG9vbHRpcCwgdGV4dFgsIHRleHRZKTtcclxuXHJcbiAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRyYXdQYWdpbmF0b3IoY3R4KSB7XHJcbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5jb25maWcudG9vbHRpcHMucGFkZGluZztcclxuICAgIGNvbnN0IHJhZGl1cyA9IHRoaXMuY29uZmlnLnRvb2x0aXBzLnJhZGl1cztcclxuICAgIGNvbnN0IGxhYmVsV2lkdGggPSA1MDtcclxuICAgIGNvbnN0IHgxID0gKHRoaXMuX2NhbnZhcy53aWR0aCAtIGxhYmVsV2lkdGgpIC8gMiAtIHJhZGl1cyAtIHBhZGRpbmc7IC8vIFByZXZQYWdlQnV0dG9uXHJcbiAgICBjb25zdCB4MiA9IHRoaXMuX2NhbnZhcy53aWR0aCAvIDI7IC8vIExhYmVsXHJcbiAgICBjb25zdCB4MyA9ICh0aGlzLl9jYW52YXMud2lkdGggKyBsYWJlbFdpZHRoKSAvIDIgKyByYWRpdXMgKyBwYWRkaW5nOyAvLyBOZXh0UGFnZUJ1dHRvblxyXG4gICAgY29uc3QgeSA9IHRoaXMuX2NhbnZhcy5oZWlnaHQgLSByYWRpdXMgLSBwYWRkaW5nO1xyXG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLl9yZXNvdXJjZS5jdXJyZW50SXRlbSArICcvJyArIHRoaXMuX3Jlc291cmNlLnRvdGFsSXRlbTtcclxuICAgIGNvbnN0IGZvbnRTaXplID0gMjU7XHJcblxyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIHRoaXMuX2JlZm9yZVBhZ2VCdXR0b24uZHJhdyhjdHgsIHgxLCB5LCByYWRpdXMpO1xyXG4gICAgdGhpcy5fbmV4dFBhZ2VCdXR0b24uZHJhdyhjdHgsIHgzLCB5LCByYWRpdXMpO1xyXG4gICAgY3R4LnJlc3RvcmUoKTtcclxuXHJcbiAgICBjdHguc2F2ZSgpO1xyXG4gICAgY3R4LmZvbnQgPSBmb250U2l6ZSArICdweCBWZXJkYW5hJztcclxuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgIGN0eC5maWxsVGV4dChsYWJlbCwgeDIsIHRoaXMuX2NhbnZhcy5oZWlnaHQgLSBwYWRkaW5nIC0gZm9udFNpemUgLyAyLCBsYWJlbFdpZHRoKTtcclxuICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRyYXdSb3VuZFJlY3RhbmdsZShjdHgsIHgsIHksIHdpZHRoLCBoZWlnaHQsIHJhZGl1cywgZmlsbCwgc3Ryb2tlKSB7XHJcbiAgICByYWRpdXMgPSAodHlwZW9mIHJhZGl1cyA9PT0gJ251bWJlcicpID8gcmFkaXVzIDogNTtcclxuICAgIGZpbGwgPSAodHlwZW9mIGZpbGwgPT09ICdib29sZWFuJykgPyBmaWxsIDogdHJ1ZTsgLy8gZmlsbCA9IGRlZmF1bHRcclxuICAgIHN0cm9rZSA9ICh0eXBlb2Ygc3Ryb2tlID09PSAnYm9vbGVhbicpID8gc3Ryb2tlIDogZmFsc2U7XHJcblxyXG4gICAgLy8gZHJhdyByb3VuZCByZWN0YW5nbGVcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5tb3ZlVG8oeCArIHJhZGl1cywgeSk7XHJcbiAgICBjdHgubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cywgeSk7XHJcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHksIHggKyB3aWR0aCwgeSArIHJhZGl1cyk7XHJcbiAgICBjdHgubGluZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCAtIHJhZGl1cyk7XHJcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQsIHggKyB3aWR0aCAtIHJhZGl1cywgeSArIGhlaWdodCk7XHJcbiAgICBjdHgubGluZVRvKHggKyByYWRpdXMsIHkgKyBoZWlnaHQpO1xyXG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCwgeCwgeSArIGhlaWdodCAtIHJhZGl1cyk7XHJcbiAgICBjdHgubGluZVRvKHgsIHkgKyByYWRpdXMpO1xyXG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSwgeCArIHJhZGl1cywgeSk7XHJcbiAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgaWYgKGZpbGwpIHsgY3R4LmZpbGwoKTsgfVxyXG4gICAgaWYgKHN0cm9rZSkgeyBjdHguc3Ryb2tlKCk7IH1cclxuICB9XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gVXRpbHNcclxuXHJcbiAgcHJpdmF0ZSBleHRlbmRzRGVmYXVsdENvbmZpZyhjZmc6IEltYWdlVmlld2VyQ29uZmlnKSB7XHJcbiAgICBjb25zdCBkZWZhdWx0Q2ZnID0gSU1BR0VWSUVXRVJfQ09ORklHX0RFRkFVTFQ7XHJcbiAgICBjb25zdCBsb2NhbENmZyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRDZmcsIGNmZyk7XHJcbiAgICBpZiAoY2ZnLmJ1dHRvblN0eWxlKSB7IGxvY2FsQ2ZnLmJ1dHRvblN0eWxlID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q2ZnLmJ1dHRvblN0eWxlLCBjZmcuYnV0dG9uU3R5bGUpOyB9XHJcbiAgICBpZiAoY2ZnLnRvb2x0aXBzKSB7IGxvY2FsQ2ZnLnRvb2x0aXBzID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q2ZnLnRvb2x0aXBzLCBjZmcudG9vbHRpcHMpOyB9XHJcbiAgICBpZiAoY2ZnLm5leHRQYWdlQnV0dG9uKSB7IGxvY2FsQ2ZnLm5leHRQYWdlQnV0dG9uID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q2ZnLm5leHRQYWdlQnV0dG9uLCBjZmcubmV4dFBhZ2VCdXR0b24pOyB9XHJcbiAgICBpZiAoY2ZnLmJlZm9yZVBhZ2VCdXR0b24pIHsgbG9jYWxDZmcuYmVmb3JlUGFnZUJ1dHRvbiA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdENmZy5iZWZvcmVQYWdlQnV0dG9uLCBjZmcuYmVmb3JlUGFnZUJ1dHRvbik7IH1cclxuICAgIGlmIChjZmcuem9vbU91dEJ1dHRvbikgeyBsb2NhbENmZy56b29tT3V0QnV0dG9uID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q2ZnLnpvb21PdXRCdXR0b24sIGNmZy56b29tT3V0QnV0dG9uKTsgfVxyXG4gICAgaWYgKGNmZy56b29tT3V0QnV0dG9uKSB7IGxvY2FsQ2ZnLnpvb21PdXRCdXR0b24gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRDZmcuem9vbU91dEJ1dHRvbiwgY2ZnLnpvb21PdXRCdXR0b24pOyB9XHJcbiAgICBpZiAoY2ZnLnpvb21JbkJ1dHRvbikgeyBsb2NhbENmZy56b29tSW5CdXR0b24gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRDZmcuem9vbUluQnV0dG9uLCBjZmcuem9vbUluQnV0dG9uKTsgfVxyXG4gICAgaWYgKGNmZy5yb3RhdGVMZWZ0QnV0dG9uKSB7IGxvY2FsQ2ZnLnJvdGF0ZUxlZnRCdXR0b24gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRDZmcucm90YXRlTGVmdEJ1dHRvbiwgY2ZnLnJvdGF0ZUxlZnRCdXR0b24pOyB9XHJcbiAgICBpZiAoY2ZnLnJvdGF0ZVJpZ2h0QnV0dG9uKSB7IGxvY2FsQ2ZnLnJvdGF0ZVJpZ2h0QnV0dG9uID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q2ZnLnJvdGF0ZVJpZ2h0QnV0dG9uLCBjZmcucm90YXRlUmlnaHRCdXR0b24pOyB9XHJcbiAgICBpZiAoY2ZnLnJlc2V0QnV0dG9uKSB7IGxvY2FsQ2ZnLnJlc2V0QnV0dG9uID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q2ZnLnJlc2V0QnV0dG9uLCBjZmcucmVzZXRCdXR0b24pOyB9XHJcbiAgICByZXR1cm4gbG9jYWxDZmc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNjcmVlblRvQ2FudmFzQ2VudHJlKHBvczogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9KSB7XHJcbiAgICBjb25zdCByZWN0ID0gdGhpcy5fY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgcmV0dXJuIHsgeDogcG9zLnggLSByZWN0LmxlZnQsIHk6IHBvcy55IC0gcmVjdC50b3AgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VUlFbGVtZW50cygpOiBCdXR0b25bXSB7XHJcbiAgICBjb25zdCBob3ZlckVsZW1lbnRzID0gdGhpcy5fYnV0dG9ucy5zbGljZSgpO1xyXG4gICAgaG92ZXJFbGVtZW50cy5wdXNoKHRoaXMuX25leHRQYWdlQnV0dG9uKTtcclxuICAgIGhvdmVyRWxlbWVudHMucHVzaCh0aGlzLl9iZWZvcmVQYWdlQnV0dG9uKTtcclxuICAgIHJldHVybiBob3ZlckVsZW1lbnRzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRVSUVsZW1lbnQocG9zOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0pIHtcclxuICAgIGNvbnN0IGFjdGl2ZVVJRWxlbWVudCA9IHRoaXMuZ2V0VUlFbGVtZW50cygpLmZpbHRlcigodWlFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiB1aUVsZW1lbnQuaXNXaXRoaW5Cb3VuZHMocG9zLngsIHBvcy55KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIChhY3RpdmVVSUVsZW1lbnQubGVuZ3RoID4gMCkgPyBhY3RpdmVVSUVsZW1lbnRbMF0gOiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc0ltYWdlKGZpbGU6IHN0cmluZyB8IEZpbGUpIHtcclxuICAgIGlmICh0aGlzLl9maWxldHlwZSAmJiB0aGlzLl9maWxldHlwZS50b0xvd2VyQ2FzZSgpID09PSAnaW1hZ2UnKSB7IHJldHVybiB0cnVlOyB9XHJcbiAgICByZXR1cm4gdGVzdEZpbGUoZmlsZSwgJ1xcXFwuKHBuZ3xqcGd8anBlZ3xnaWYpfGltYWdlL3BuZycpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc1BkZihmaWxlOiBzdHJpbmcgfCBGaWxlKSB7XHJcbiAgICBpZiAodGhpcy5fZmlsZXR5cGUgJiYgdGhpcy5fZmlsZXR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3BkZicpIHsgcmV0dXJuIHRydWU7IH1cclxuICAgIHJldHVybiB0ZXN0RmlsZShmaWxlLCAnXFxcXC4ocGRmKXxhcHBsaWNhdGlvbi9wZGYnKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRlc3RGaWxlKGZpbGU6IHN0cmluZyB8IEZpbGUsIHJlZ2V4VGVzdDogc3RyaW5nKSB7XHJcbiAgaWYgKCFmaWxlKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gIGNvbnN0IG5hbWUgPSBmaWxlIGluc3RhbmNlb2YgRmlsZSA/IGZpbGUubmFtZSA6IGZpbGU7XHJcbiAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKS5tYXRjaChyZWdleFRlc3QpICE9PSBudWxsO1xyXG59XHJcbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEltYWdlVmlld2VyQ29tcG9uZW50IH0gZnJvbSAnLi9pbWFnZXZpZXdlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBJTUFHRVZJRVdFUl9DT05GSUcsIElNQUdFVklFV0VSX0NPTkZJR19ERUZBVUxUIH0gZnJvbSAnLi9pbWFnZXZpZXdlci5jb25maWcnO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IElNQUdFVklFV0VSX0NPTkZJRywgdXNlVmFsdWU6IElNQUdFVklFV0VSX0NPTkZJR19ERUZBVUxUIH1dLFxyXG4gIGRlY2xhcmF0aW9uczogW0ltYWdlVmlld2VyQ29tcG9uZW50XSxcclxuICBleHBvcnRzOiBbSW1hZ2VWaWV3ZXJDb21wb25lbnRdLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgSW1hZ2VWaWV3ZXJNb2R1bGUgeyB9XHJcbiJdLCJuYW1lcyI6WyJ0c2xpYl8xLl9fZXh0ZW5kcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsSUFFQTs7OzRCQUZBO0lBMEJDLENBQUE7QUF4QkQ7Ozs7Ozs7QUEyQ0EsNEJBQW1DLElBQWEsRUFBRSxPQUFnQixFQUFFLE1BQWtCLEVBQUUsSUFBb0I7SUFBeEMsdUJBQUEsRUFBQSxVQUFrQjtJQUFFLHFCQUFBLEVBQUEsV0FBb0I7SUFDMUcsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztDQUNyRTtBQUVELHFCQUFhLGtCQUFrQixHQUFHLElBQUksY0FBYyxDQUFvQixvQkFBb0IsQ0FBQyxDQUFDO0FBRTlGLHFCQUFXLDBCQUEwQixHQUFzQjtJQUN6RCxLQUFLLEVBQUUsR0FBRzs7SUFDVixNQUFNLEVBQUUsR0FBRzs7SUFDWCxPQUFPLEVBQUUsU0FBUzs7SUFDbEIsU0FBUyxFQUFFLEdBQUc7O0lBQ2QsYUFBYSxFQUFFLEtBQUs7SUFDcEIsY0FBYyxFQUFFLFlBQVk7SUFDNUIsV0FBVyxFQUFFO1FBQ1gsY0FBYyxFQUFFLGdCQUFnQjs7UUFDaEMsS0FBSyxFQUFFLEdBQUc7O1FBQ1YsVUFBVSxFQUFFLEdBQUc7O1FBQ2YsT0FBTyxFQUFFLFNBQVM7O1FBQ2xCLFNBQVMsRUFBRSxTQUFTOztRQUNwQixXQUFXLEVBQUUsU0FBUzs7UUFDdEIsV0FBVyxFQUFFLENBQUM7S0FDZjtJQUNELFFBQVEsRUFBRTtRQUNSLE9BQU8sRUFBRSxJQUFJOztRQUNiLE9BQU8sRUFBRSxTQUFTOztRQUNsQixPQUFPLEVBQUUsR0FBRzs7UUFD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QyxHQUFHLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hELHFCQUFNLE1BQU0sR0FBRztZQUNiLEtBQUssRUFBRSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxNQUFNO1lBQ3JELE1BQU0sRUFBRSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxLQUFLO1NBQ3ZELENBQUM7UUFFRixJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLE1BQU0sQ0FBQyxLQUFLLEVBQUU7WUFDOUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztTQUMxRDthQUFNO1lBQ0wsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztTQUN4RDtRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDOztRQUd4QyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztRQUM5RCxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztRQUNoRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxD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